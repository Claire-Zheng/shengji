!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,i=s.length;o<i;o++,r++)a[r]=s[o];return a},o=React.createElement,i={};CARDS.forEach((function(e){i[e.value]=e}));var c=function(e){function t(t){var n=e.call(this,t)||this;return n.setGameMode=n.setGameMode.bind(n),n.startGame=n.startGame.bind(n),n.setKittySize=n.setKittySize.bind(n),n}return r(t,e),t.prototype.setGameMode=function(e){e.preventDefault(),"Tractor"==e.target.value?I({Action:{SetGameMode:"Tractor"}}):I({Action:{SetGameMode:{FindingFriends:{num_friends:0,friends:[]}}}})},t.prototype.setKittySize=function(e){(e.preventDefault(),""!=e.target.value)&&I({Action:{SetKittySize:parseInt(e.target.value,10)}})},t.prototype.startGame=function(e){e.preventDefault(),I({Action:"StartGame"})},t.prototype.render=function(){var e="Tractor"==this.props.state.game_mode?"Tractor":"FindingFriends";return React.createElement("div",null,React.createElement(w,{game_mode:this.props.state.game_mode}),React.createElement(R,{players:this.props.state.players,landlord:this.props.state.landlord,next:null,movable:!0,name:this.props.name}),React.createElement("p",null,"Send the link to other players to allow them to join the game:"," ",React.createElement("a",{href:window.location.href,target:"_blank"},React.createElement("code",null,window.location.href))),React.createElement("select",{value:e,onChange:this.setGameMode},React.createElement("option",{value:"Tractor"},"升级 / Tractor"),React.createElement("option",{value:"FindingFriends"},"找朋友 / Finding Friends")),React.createElement(b,{num_decks:this.props.state.num_decks,players:this.props.state.players}),this.props.state.players.length>=4?React.createElement("button",{onClick:this.startGame},"Start game"):React.createElement("p",null,"Waiting for players..."),React.createElement(k,{players:this.props.state.players}),React.createElement(_,{players:this.props.state.players,landlord:this.props.state.landlord}),React.createElement(C,{players:this.props.state.players,name:this.props.name,num_decks:this.props.state.num_decks}))},t}(React.Component),l=function(e){function t(t){var n=e.call(this,t)||this;return n.could_draw=!1,n.timeout=null,n.state={selected:[],autodraw:!0},n.setSelected=n.setSelected.bind(n),n.makeBid=n.makeBid.bind(n),n.drawCard=n.drawCard.bind(n),n.onAutodrawClicked=n.onAutodrawClicked.bind(n),n}return r(t,e),t.prototype.setSelected=function(e){this.setState({selected:e})},t.prototype.makeBid=function(e){var t=this;e.preventDefault();var n={};if(this.state.selected.forEach((function(e){return n[e]=(n[e]||0)+1})),1==Object.keys(n).length){var a={};this.props.state.players.forEach((function(e){a[e.id]=e}));var r=function(e){var r=0;s.props.state.bids.forEach((function(n){a[n.id].name==t.props.name&&n.card==e&&(r=r<n.count?n.count:r)})),I({Action:{Bid:[e,n[e]+r]}}),s.setSelected([])},s=this;for(var o in n)r(o)}},t.prototype.drawCard=function(){var e=this.props.state.players[this.props.state.position].name==this.props.name;this.timeout&&(clearTimeout(this.timeout),this.timeout=null),e&&I({Action:"DrawCard"})},t.prototype.pickUpKitty=function(e){e.preventDefault(),I({Action:"PickUpKitty"})},t.prototype.onAutodrawClicked=function(e){this.setState({autodraw:e.target.checked}),e.target.checked?this.drawCard():this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},t.prototype.render=function(){var e=this,t=this.props.state.players[this.props.state.position].name==this.props.name&&this.props.state.deck.length>0;t&&!this.could_draw&&null==this.timeout&&this.state.autodraw&&(this.timeout=setTimeout((function(){e.drawCard()}),250)),this.could_draw=t;var n=this.props.state.players[this.props.state.position].id;this.props.state.position;0==this.props.state.deck.length&&this.props.state.bids.length>0&&(n=this.props.state.bids[this.props.state.bids.length-1].id,this.props.state.players.forEach((function(e,t){e.id==n&&t})));var a={};this.props.state.players.forEach((function(e){a[e.id]=e}));var r={};this.props.state.bids.forEach((function(t){if(a[t.id].name==e.props.name){var n=r[t.card]||0;r[t.card]=n<t.count?t.count:n}}));var o=s(this.props.cards);return Object.keys(r).forEach((function(e){for(var t=r[e]||0,n=0;n<t;n+=1){var a=o.indexOf(e);a>=0&&o.splice(a,1)}})),React.createElement("div",null,React.createElement(w,{game_mode:this.props.state.game_mode}),React.createElement(R,{players:this.props.state.players,landlord:this.props.state.landlord,next:n,name:this.props.name}),React.createElement("div",null,React.createElement("h2",null,"Bids"),this.props.state.bids.map((function(t,n){var a="unknown";return e.props.state.players.forEach((function(e){e.id==t.id&&(a=e.name)})),React.createElement(y,{label:a,key:n,cards:Array(t.count).fill(t.card)})}))),React.createElement("button",{onClick:function(t){t.preventDefault(),e.drawCard()},disabled:!t},"Draw card"),React.createElement("label",null,React.createElement("input",{type:"checkbox",name:"autodraw",checked:this.state.autodraw,onChange:this.onAutodrawClicked})),React.createElement("button",{onClick:this.makeBid,disabled:0==this.state.selected.length},"Make bid"),React.createElement("button",{onClick:this.pickUpKitty,disabled:this.props.state.deck.length>0||0==this.props.state.bids.length},"Pick up cards from the bottom"),React.createElement(h,{cards:o,selected:this.state.selected,setSelected:this.setSelected}))},t}(React.Component),p=function(e){function t(t){var n=e.call(this,t)||this;return n.moveCardToKitty=n.moveCardToKitty.bind(n),n.moveCardToHand=n.moveCardToHand.bind(n),n.startGame=n.startGame.bind(n),n.pickFriends=n.pickFriends.bind(n),n.state={friends:[]},n.fixFriends=n.fixFriends.bind(n),n}return r(t,e),t.prototype.fixFriends=function(){if("Tractor"!=this.props.state.game_mode){var e=this.props.state.game_mode.FindingFriends,t=e.num_friends,n=e.friends;if(t!=this.state.friends.length)if(n.length!=t){for(var a=s(this.state.friends);a.length<t;)a.push({card:"",skip:0,player_id:null});for(;a.length>t;)a.pop();this.setState({friends:a})}else this.setState({friends:n})}else 0!=this.state.friends.length&&this.setState({friends:[]})},t.prototype.componentDidMount=function(){this.fixFriends()},t.prototype.componentDidUpdate=function(){this.fixFriends()},t.prototype.moveCardToKitty=function(e){I({Action:{MoveCardToKitty:e}})},t.prototype.moveCardToHand=function(e){I({Action:{MoveCardToHand:e}})},t.prototype.startGame=function(e){e.preventDefault(),I({Action:"BeginPlay"})},t.prototype.pickFriends=function(e){e.preventDefault(),"Tractor"!=this.props.state.game_mode&&this.props.state.game_mode.FindingFriends.num_friends==this.state.friends.length&&I({Action:{SetFriends:this.state.friends}})},t.prototype.render=function(){var e=this,t=0;return this.props.state.players.forEach((function(n,a){n.id==e.props.state.landlord&&(t=a)})),this.props.state.players[t].name==this.props.name?React.createElement("div",null,React.createElement(w,{game_mode:this.props.state.game_mode}),React.createElement(R,{players:this.props.state.players,landlord:this.props.state.landlord,next:this.props.state.landlord,name:this.props.name}),React.createElement(v,{trump:this.props.state.trump}),"Tractor"!=this.props.state.game_mode?React.createElement("div",null,React.createElement(S,{game_mode:this.props.state.game_mode}),this.state.friends.map((function(t,n){return React.createElement(N,{onChange:function(t){var a=s(e.state.friends);a[n]=t,e.setState({friends:a})},key:n,friend:t,trump:e.props.state.trump,num_decks:e.props.state.num_decks})})),React.createElement("button",{onClick:this.pickFriends},"Pick friends")):null,React.createElement("h2",null,"Your hand"),React.createElement("div",{className:"hand"},this.props.cards.map((function(t,n){return React.createElement(f,{key:n,onClick:function(){return e.moveCardToKitty(t)},card:t})}))),React.createElement("h2",null,"Discarded cards"," ",this.props.state.kitty.length/this.props.state.kitty_size),React.createElement("div",{className:"kitty"},this.props.state.kitty.map((function(t,n){return React.createElement(f,{key:n,onClick:function(){return e.moveCardToHand(t)},card:t})}))),React.createElement("button",{onClick:this.startGame,disabled:this.props.state.kitty.length!=this.props.state.kitty_size},"Start game")):React.createElement("div",null,React.createElement(w,{game_mode:this.props.state.game_mode}),React.createElement(R,{players:this.props.state.players,landlord:this.props.state.landlord,next:this.props.state.landlord,name:this.props.name}),React.createElement(v,{trump:this.props.state.trump}),React.createElement("div",{className:"hand"},this.props.cards.map((function(e,t){return React.createElement(f,{key:t,card:e})}))),React.createElement("p",null,"Waiting..."))},t}(React.Component),u=function(e){function t(t){var n=e.call(this,t)||this;return n.was_my_turn=!1,n.state={selected:[]},n.setSelected=n.setSelected.bind(n),n.playCards=n.playCards.bind(n),n.takeBackCards=n.takeBackCards.bind(n),n.endTrick=n.endTrick.bind(n),n}return r(t,e),t.prototype.setSelected=function(e){this.setState({selected:e})},t.prototype.playCards=function(e){e.preventDefault(),I({Action:{PlayCards:this.state.selected}}),this.setSelected([])},t.prototype.takeBackCards=function(e){e.preventDefault(),I({Action:"TakeBackCards"})},t.prototype.endTrick=function(e){e.preventDefault(),I({Action:"EndTrick"})},t.prototype.startNewGame=function(e){e.preventDefault(),I({Action:"StartNewGame"})},t.prototype.render=function(){var e,t,n,a,r,s=this,o=this.props.state.trick.player_queue[0],i=!1,c=!1,l=!1;return this.props.state.players.forEach((function(e){if(e.name==s.props.name){var t=s.props.state.trick.played_cards[s.props.state.trick.played_cards.length-1];e.id==o&&(l=!0,c=t?s.state.selected.length==t.cards.length:s.state.selected.length>0),t&&e.id==t.id&&(i=!0)}})),this.props.beep_on_turn&&l&&!this.was_my_turn&&(e=3,t=440,n=200,a=P.createOscillator(),r=P.createGain(),a.connect(r),a.frequency.value=t,a.type="square",r.connect(P.destination),r.gain.value=.01*e,a.start(P.currentTime),a.stop(P.currentTime+.001*n)),this.was_my_turn=l,React.createElement("div",null,React.createElement(w,{game_mode:this.props.state.game_mode}),React.createElement(R,{players:this.props.state.players,landlord:this.props.state.landlord,landlords_team:this.props.state.landlords_team,name:this.props.name,next:o}),React.createElement(v,{trump:this.props.state.trump}),React.createElement(S,{game_mode:this.props.state.game_mode}),React.createElement(d,{trick:this.props.state.trick,players:this.props.state.players}),React.createElement("button",{onClick:this.playCards,disabled:!c},"Play selected cards"),React.createElement("button",{onClick:this.takeBackCards,disabled:!i},"Take back last play"),React.createElement("button",{onClick:this.endTrick,disabled:this.props.state.trick.player_queue.length>0},"Finish trick"),0==this.props.cards.length?React.createElement("button",{onClick:this.startNewGame},"Finish game"):null,",",React.createElement(h,{cards:this.props.cards,selected:this.state.selected,setSelected:this.setSelected}),this.props.state.last_trick&&this.props.show_last_trick?React.createElement("div",null,React.createElement("p",null,"Previous trick"),React.createElement(d,{trick:this.props.state.last_trick,players:this.props.state.players})):null,React.createElement(m,{points:this.props.state.points,players:this.props.state.players,landlords_team:this.props.state.landlords_team}),React.createElement(y,{cards:this.props.state.kitty,label:"底牌"}))},t}(React.Component),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this,t={};this.props.players.forEach((function(e){t[e.id]=e.name}));var n=this.props.trick.played_cards.length>0?Array(this.props.trick.played_cards[0].cards.length).fill("🂠"):["🂠"];return React.createElement("div",{className:"trick"},this.props.trick.played_cards.map((function(n,a){var r=e.props.trick.current_winner==n.id;return React.createElement(y,{key:a,label:r?t[n.id]+" (!)":t[n.id],className:r?"winning":"",cards:n.cards})})),this.props.trick.player_queue.map((function(a,r){return React.createElement(y,{key:r+e.props.trick.played_cards.length,label:t[a],cards:n})})))},t}(React.Component),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this;return o("div",{className:"points"},this.props.players.map((function(t){var n=0;e.props.points[t.id].forEach((function(e){n+=i[e].points}));var a=e.props.landlords_team.includes(t.id)?"landlord":"",r=e.props.points[t.id].length>0?e.props.points[t.id]:["🂠"];return React.createElement(y,{key:t.id,className:a,label:t.name+": "+n+"分",cards:r})})))},t}(React.Component),h=function(e){function t(t){var n=e.call(this,t)||this;return n.selectCard=n.selectCard.bind(n),n.unselectCard=n.unselectCard.bind(n),n}return r(t,e),t.prototype.selectCard=function(e){var t=s(this.props.selected);t.push(e),this.props.setSelected(t)},t.prototype.unselectCard=function(e){var t=this.props.selected.indexOf(e);if(t>=0){var n=s(this.props.selected);n.splice(t,1),this.props.setSelected(n)}},t.prototype.render=function(){var e=this,t=s(this.props.cards);return this.props.selected.forEach((function(e){t.splice(t.indexOf(e),1)})),o("div",{className:"hand"},o("div",{className:"selected-cards"},this.props.selected.map((function(t,n){return o(f,{key:n,onClick:function(){return e.unselectCard(t)},card:t})})),0==this.props.selected.length?o(f,{card:"🂠"}):null),o("p",null,"Your hand"),o("div",{className:"unselected-cards"},t.map((function(t,n){return o(f,{key:n,onClick:function(){return e.selectCard(t)},card:t})})),0==t.length?o(f,{card:"🂠"}):null))},t}(React.Component),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=i[this.props.card];if(!e)return o("span",{className:"card unknown"},this.props.card);var t={className:"card "+e.typ};return this.props.onClick&&(t.onClick=this.props.onClick),o("span",t,e.display_value)},t}(React.Component),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e="labeled-play";return this.props.className&&(e=e+" "+this.props.className),React.createElement("div",{className:e},React.createElement("div",{className:"play"},this.props.cards.map((function(e,t){return React.createElement(f,{card:e,key:t})}))),React.createElement("div",{className:"label"},"this.props.label"))},t}(React.Component),g=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return r(t,e),t.prototype.handleChange=function(e){this.props.setName(e.target.value)},t.prototype.handleSubmit=function(e){e.preventDefault(),this.props.name.length>0&&I({room_name:this.props.room_name,name:this.props.name})},t.prototype.render=function(){return React.createElement("div",null,React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("input",{type:"text",placeholder:"name",value:this.props.name,onChange:this.handleChange,autoFocus:!0}),React.createElement("input",{type:"submit",value:"join"})))},t}(React.Component),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return this.props.trump.Standard?React.createElement("div",{className:"trump"},"The trump suit is"," ",React.createElement("span",{className:this.props.trump.Standard.suit},this.props.trump.Standard.suit),", rank ",this.props.trump.Standard.number):this.props.trump.NoTrump?React.createElement("div",{className:"trump"},"No trump, rank ",this.props.trump.NoTrump.number):null},t}(React.Component),k=function(e){function t(t){var n=e.call(this,t)||this;return n.state={to_kick:""},n.onChange=n.onChange.bind(n),n.kick=n.kick.bind(n),n}return r(t,e),t.prototype.onChange=function(e){e.preventDefault(),this.setState({to_kick:e.target.value})},t.prototype.kick=function(e){e.preventDefault(),I({Kick:parseInt(this.state.to_kick,10)})},t.prototype.render=function(){return o("div",{className:"kicker"},o("select",{value:this.state.to_kick,onChange:this.onChange},o("option",{value:""},""),this.props.players.map((function(e){return o("option",{value:e.id,key:e.id},e.name)}))),o("button",{onClick:this.kick,disabled:""==this.state.to_kick},"kick"))},t}(React.Component),_=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=n.onChange.bind(n),n}return r(t,e),t.prototype.onChange=function(e){e.preventDefault(),""!=e.target.value?I({Action:{SetLandlord:parseInt(e.target.value,10)}}):I({Action:{SetLandlord:null}})},t.prototype.render=function(){return o("div",{className:"landlord-picker"},o("label",null,"leader: ",o("select",{value:null!=this.props.landlord?this.props.landlord:"",onChange:this.onChange},o("option",{value:""},"winner of the bid"),this.props.players.map((function(e){return o("option",{value:e.id,key:e.id},e.name)})))))},t}(React.Component),b=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=n.onChange.bind(n),n}return r(t,e),t.prototype.onChange=function(e){e.preventDefault(),""!=e.target.value?I({Action:{SetNumDecks:parseInt(e.target.value,10)}}):I({Action:{SetNumDecks:null}})},t.prototype.render=function(){return React.createElement("div",{className:"num-decks-picker"},React.createElement("label",null,"number of decks:"," ",React.createElement("select",{value:null!=this.props.num_decks?this.props.num_decks:"",onChange:this.onChange},React.createElement("option",{value:""},"default"),Array(this.props.players.length).fill(0).map((function(e,t){var n=t+1;return React.createElement("option",{value:n,key:t},n)})))))},t}(React.Component),C=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=n.onChange.bind(n),n}return r(t,e),t.prototype.onChange=function(e){e.preventDefault(),""!=e.target.value&&I({Action:{SetRank:e.target.value}})},t.prototype.render=function(){var e=this,t="";return this.props.players.forEach((function(n){n.name==e.props.name&&(t=n.level)})),React.createElement("div",{className:"landlord-picker"},React.createElement("label",null,"rank:"," ",React.createElement("select",{value:t,onChange:this.onChange},["2","3","4","5","6","7","8","9","10","J","K","Q","A"].map((function(e){return React.createElement("option",{value:e,key:e},e)})))))},t}(React.Component),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.movePlayerLeft=function(e,t){e.preventDefault();var n=this.props.players.map((function(e){return e.id})),a=n.indexOf(t);if(a>0){var r=n[a];n[a]=n[a-1],n[a-1]=r}else{r=n[a];n[a]=n[n.length-1],n[n.length-1]=r}I({Action:{ReorderPlayers:n}})},t.prototype.movePlayerRight=function(e,t){e.preventDefault();var n=this.props.players.map((function(e){return e.id})),a=n.indexOf(t);if(a<n.length-1){var r=n[a];n[a]=n[a+1],n[a+1]=r}else{r=n[a];n[a]=n[0],n[0]=r}I({Action:{ReorderPlayers:n}})},t.prototype.render=function(){var e=this;return o("table",{className:"players"},o("tbody",null,o("tr",null,this.props.players.map((function(t){var n="player",a=t.name+" (rank "+t.level+")";return t.id==e.props.landlord&&(a+=" (当庄)"),t.name==e.props.name&&(a+=" (You!)"),(t.id==e.props.landlord||e.props.landlords_team&&e.props.landlords_team.includes(t.id))&&(n+=" landlord"),t.id==e.props.next&&(n+=" next"),o("td",{key:t.id,className:n},e.props.movable?o("button",{onClick:function(n){return e.movePlayerLeft(n,t.id)}},"<"):null,a,e.props.movable?o("button",{onClick:function(n){return e.movePlayerRight(n,t.id)}},">"):null)})))))},t}(React.Component),E=function(e){function t(t){var n=e.call(this,t)||this;return n.anchor=React.createRef(),n.state={message:""},n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return r(t,e),t.prototype.componentDidMount=function(){this.anchor.current&&this.anchor.current.scrollIntoView({block:"nearest",inline:"start"})},t.prototype.componentDidUpdate=function(){this.anchor.current&&this.anchor.current.scrollIntoView({block:"nearest",inline:"start"})},t.prototype.handleChange=function(e){this.setState({message:e.target.value})},t.prototype.handleSubmit=function(e){e.preventDefault(),this.state.message.length>0&&I({Message:this.state.message}),this.setState({message:""})},t.prototype.render=function(){return React.createElement("div",{className:"chat"},React.createElement("div",{className:"messages"},this.props.messages.map((function(e,t){var n="message";return e.from_game&&(n+=" game-message"),React.createElement("p",{key:t,className:n},e.from,": ",e.message)})),React.createElement("div",{className:"chat-anchor",ref:this.anchor})),React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("input",{type:"text",placeholder:"type message here",value:this.state.message,onChange:this.handleChange}),React.createElement("input",{type:"submit",value:"submit"})))},t}(React.Component),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return"Tractor"==this.props.game_mode?React.createElement("h1",null,"升级 / Tractor"):React.createElement("h1",null,"找朋友 / Finding Friends")},t}(React.Component),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return"Tractor"!=this.props.game_mode?o("div",{className:"pending-friends"},this.props.game_mode.FindingFriends.friends.map((function(e,t){if(null!=e.player_id)return null;var n=i[e.card];if(!n)return null;n.number,n.typ;return 0==e.skip?o("p",{key:t},"The next person to play ",o("span",{className:n.typ},""+n.number+n.typ)," is a friend"):o("p",{key:t},e.skip+" ",o("span",{className:n.typ},""+n.number+n.typ)," can be played before the next person to play ",o("span",{className:n.typ},""+n.number+n.typ)," is a friend")}))):null},t}(React.Component),N=function(e){function t(t){var n=e.call(this,t)||this;return n.onCardChange=n.onCardChange.bind(n),n.onOrdinalChange=n.onOrdinalChange.bind(n),n}return r(t,e),t.prototype.onCardChange=function(e){e.preventDefault(),this.props.onChange({card:e.target.value,skip:this.props.friend.skip})},t.prototype.onOrdinalChange=function(e){e.preventDefault(),this.props.onChange({card:this.props.friend.card,skip:parseInt(e.target.value,10)})},t.prototype.render=function(){var e,t=this.props.trump.Standard?this.props.trump.Standard.number:null===(e=this.props.trump.NoTrump)||void 0===e?void 0:e.number;return o("div",{className:"friend-select"},o("select",{value:this.props.friend.card,onChange:this.onCardChange},o("option",{value:""}," "),CARDS.map((function(e){return null!=e.number&&e.number!=t?o("option",{key:e.value,value:e.value},""+e.number+e.typ):null}))),o("select",{value:this.props.friend.skip,onChange:this.onOrdinalChange},Array(this.props.num_decks).fill(1).map((function(e,t){return o("option",{key:t,value:t},t+1)}))))},t}(React.Component),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o("div",{className:"errors"},this.props.errors.map((function(e,t){return o("p",{key:t},o("code",null,e))})))},t}(React.Component);if(17!=window.location.hash.length){var A=new Uint8Array(8);window.crypto.getRandomValues(A);var D=Array.from(A,(function(e){return("0"+e.toString(16)).substr(-2)})).join("");window.location.hash=D}var x=("https:"==location.protocol?"wss://":"ws://")+location.host+location.pathname+(location.pathname.endsWith("/")?"api":"/api"),F=new WebSocket(x),O={connected:!1,room_name:window.location.hash.slice(1),name:window.localStorage.getItem("name")||"",game_state:null,four_color:"on"==window.localStorage.getItem("four_color")||!1,beep_on_turn:"on"==window.localStorage.getItem("beep_on_turn")||!1,show_last_trick:"on"==window.localStorage.getItem("show_last_trick")||!1,cards:[],errors:[],messages:[]};function I(e){F.send(JSON.stringify(e))}function M(){O.connected?null==O.game_state?ReactDOM.render(o("div",null,o("h2",null,"Room Name: "+O.room_name),o(T,{errors:O.errors}),o(g,{name:O.name,room_name:O.room_name,setName:function(e){O.name=e,window.localStorage.setItem("name",e),M()}})),document.getElementById("root")):ReactDOM.render(o("div",{className:O.four_color?"four-color":""},o(T,{errors:O.errors}),o("div",{className:"game"},O.game_state.Initialize?o(c,{state:O.game_state.Initialize,cards:O.cards,name:O.name}):null,O.game_state.Draw?o(l,{state:O.game_state.Draw,cards:O.cards,name:O.name}):null,O.game_state.Exchange?o(p,{state:O.game_state.Exchange,cards:O.cards,name:O.name}):null,O.game_state.Play?o(u,{state:O.game_state.Play,cards:O.cards,name:O.name,show_last_trick:O.show_last_trick,beep_on_turn:O.beep_on_turn}):null,O.game_state.Done?o("p",null,"Game over"):null),o(E,{messages:O.messages}),o("hr",null),o("div",{className:"settings"},o("label",null,"four-color mode",o("input",{name:"four-color",type:"checkbox",checked:O.four_color,onChange:function(e){O.four_color=e.target.checked,O.four_color?window.localStorage.setItem("four_color","on"):window.localStorage.setItem("four_color","off"),M()}})),o("label",null,"show last trick",o("input",{name:"show-last-trick",type:"checkbox",checked:O.show_last_trick,onChange:function(e){O.show_last_trick=e.target.checked,O.show_last_trick?window.localStorage.setItem("show_last_trick","on"):window.localStorage.setItem("show_last_trick","off"),M()}})),o("label",null,"beep on turn",o("input",{name:"show-last-trick",type:"checkbox",checked:O.beep_on_turn,onChange:function(e){O.beep_on_turn=e.target.checked,O.beep_on_turn?window.localStorage.setItem("beep_on_turn","on"):window.localStorage.setItem("beep_on_turn","off"),M()}})))),document.getElementById("root")):ReactDOM.render(React.createElement("p",null,"disconnected from server, please refresh"),document.getElementById("root"))}F.onopen=function(){O.connected=!0,M()},F.onclose=function(e){O.connected=!1,M()},F.onmessage=function(e){var t=JSON.parse(e.data);t.Message&&(O.messages.push(t.Message),O.messages.length>=100&&O.messages.shift()),t.Broadcast&&(O.messages.push({from:"GAME",message:t.Broadcast,from_game:!0}),O.messages.length>=100&&O.messages.shift()),t.Error&&(O.errors.push(t.Error),setTimeout((function(){O.errors=O.errors.filter((function(e){return e!=t.Error})),M()}),5e3)),t.State&&(O.game_state=t.State.state,O.cards=t.State.cards),"Kicked"==t&&F.close(),M()};var P=new AudioContext}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzeCJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImUiLCJSZWFjdCIsImNyZWF0ZUVsZW1lbnQiLCJDQVJEX0xVVCIsIkNBUkRTIiwiZm9yRWFjaCIsInByb3BzIiwic2V0R2FtZU1vZGUiLCJzdGFydEdhbWUiLCJzZXRLaXR0eVNpemUiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsInNlbmQiLCJBY3Rpb24iLCJTZXRHYW1lTW9kZSIsIkZpbmRpbmdGcmllbmRzIiwibnVtX2ZyaWVuZHMiLCJmcmllbmRzIiwiU2V0S2l0dHlTaXplIiwicGFyc2VJbnQiLCJyZW5kZXIiLCJtb2RlX2FzX3N0cmluZyIsInRoaXMiLCJzdGF0ZSIsImdhbWVfbW9kZSIsIkdhbWVNb2RlIiwiUGxheWVycyIsInBsYXllcnMiLCJsYW5kbG9yZCIsIm5leHQiLCJtb3ZhYmxlIiwiaHJlZiIsIndpbmRvdyIsImxvY2F0aW9uIiwib25DaGFuZ2UiLCJOdW1EZWNrc1NlbGVjdG9yIiwibnVtX2RlY2tzIiwibGVuZ3RoIiwib25DbGljayIsIktpY2tlciIsIkxhbmRsb3JkU2VsZWN0b3IiLCJSYW5rU2VsZWN0b3IiLCJDb21wb25lbnQiLCJjb3VsZF9kcmF3IiwidGltZW91dCIsInNlbGVjdGVkIiwiYXV0b2RyYXciLCJzZXRTZWxlY3RlZCIsIm1ha2VCaWQiLCJkcmF3Q2FyZCIsIm9uQXV0b2RyYXdDbGlja2VkIiwibmV3X3NlbGVjdGVkIiwic2V0U3RhdGUiLCJjb3VudHMiLCJrZXlzIiwiaWQiLCJhbHJlYWR5X2JpZCIsImJpZHMiLCJiaWQiLCJjYXJkIiwiY291bnQiLCJCaWQiLCJjYW5fZHJhdyIsInBvc2l0aW9uIiwiY2xlYXJUaW1lb3V0IiwicGlja1VwS2l0dHkiLCJjaGVja2VkIiwiZGVjayIsInNldFRpbWVvdXQiLCJwbGF5ZXIiLCJpZHgiLCJteV9iaWRzIiwiZXhpc3RpbmdfYmlkIiwiY2FyZHNfbm90X2JpZCIsImNhcmRzIiwiY2FyZF9pZHgiLCJpbmRleE9mIiwic3BsaWNlIiwibWFwIiwiTGFiZWxlZFBsYXkiLCJsYWJlbCIsIkFycmF5IiwiZmlsbCIsImRpc2FibGVkIiwidHlwZSIsIkNhcmRzIiwibW92ZUNhcmRUb0tpdHR5IiwibW92ZUNhcmRUb0hhbmQiLCJwaWNrRnJpZW5kcyIsImZpeEZyaWVuZHMiLCJwcm9wX2ZyaWVuZHMiLCJwdXNoIiwic2tpcCIsInBsYXllcl9pZCIsInBvcCIsImNvbXBvbmVudERpZE1vdW50IiwiY29tcG9uZW50RGlkVXBkYXRlIiwiTW92ZUNhcmRUb0tpdHR5IiwiTW92ZUNhcmRUb0hhbmQiLCJTZXRGcmllbmRzIiwibGFuZGxvcmRfaWR4IiwiVHJ1bXAiLCJ0cnVtcCIsIkZyaWVuZHMiLCJmcmllbmQiLCJGcmllbmRTZWxlY3QiLCJ4IiwibmV3X2ZyaWVuZHMiLCJjbGFzc05hbWUiLCJDYXJkIiwia2l0dHkiLCJraXR0eV9zaXplIiwid2FzX215X3R1cm4iLCJwbGF5Q2FyZHMiLCJ0YWtlQmFja0NhcmRzIiwiZW5kVHJpY2siLCJQbGF5Q2FyZHMiLCJzdGFydE5ld0dhbWUiLCJ2b2wiLCJmcmVxIiwiZHVyYXRpb24iLCJ2IiwidSIsInRyaWNrIiwicGxheWVyX3F1ZXVlIiwiY2FuX3Rha2VfYmFjayIsImNhbl9wbGF5IiwiaXNfbXlfdHVybiIsImxhc3RfcGxheSIsInBsYXllZF9jYXJkcyIsImJlZXBfb25fdHVybiIsImJlZXBDb250ZXh0IiwiY3JlYXRlT3NjaWxsYXRvciIsImNyZWF0ZUdhaW4iLCJjb25uZWN0IiwiZnJlcXVlbmN5IiwiZGVzdGluYXRpb24iLCJnYWluIiwic3RhcnQiLCJjdXJyZW50VGltZSIsInN0b3AiLCJsYW5kbG9yZHNfdGVhbSIsIlRyaWNrIiwibGFzdF90cmljayIsInNob3dfbGFzdF90cmljayIsIlBvaW50cyIsInBvaW50cyIsIm5hbWVzX2J5X2lkIiwiYmxhbmtfY2FyZHMiLCJwbGF5ZWQiLCJ3aW5uaW5nIiwiY3VycmVudF93aW5uZXIiLCJ0b3RhbF9wb2ludHMiLCJpbmNsdWRlcyIsInNlbGVjdENhcmQiLCJ1bnNlbGVjdENhcmQiLCJwb3MiLCJ1bnNlbGVjdGVkIiwidHlwIiwiZGlzcGxheV92YWx1ZSIsImhhbmRsZUNoYW5nZSIsImhhbmRsZVN1Ym1pdCIsImV2ZW50Iiwic2V0TmFtZSIsInJvb21fbmFtZSIsIm9uU3VibWl0IiwicGxhY2Vob2xkZXIiLCJhdXRvRm9jdXMiLCJTdGFuZGFyZCIsInN1aXQiLCJudW1iZXIiLCJOb1RydW1wIiwidG9fa2ljayIsImtpY2siLCJLaWNrIiwiU2V0TGFuZGxvcmQiLCJTZXROdW1EZWNrcyIsIl8iLCJ2YWwiLCJTZXRSYW5rIiwicmFuayIsImxldmVsIiwibW92ZVBsYXllckxlZnQiLCJwbGF5ZXJfaWRzIiwiaW5kZXgiLCJSZW9yZGVyUGxheWVycyIsIm1vdmVQbGF5ZXJSaWdodCIsImRlc2NyaXB0b3IiLCJhbmNob3IiLCJjcmVhdGVSZWYiLCJtZXNzYWdlIiwiY3VycmVudCIsInNjcm9sbEludG9WaWV3IiwiYmxvY2siLCJpbmxpbmUiLCJNZXNzYWdlIiwibWVzc2FnZXMiLCJmcm9tX2dhbWUiLCJmcm9tIiwicmVmIiwib25DYXJkQ2hhbmdlIiwib25PcmRpbmFsQ2hhbmdlIiwiZXJyb3JzIiwiZXJyIiwiaGFzaCIsImFyciIsIlVpbnQ4QXJyYXkiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJ0b1N0cmluZyIsInN1YnN0ciIsImpvaW4iLCJ1cmkiLCJwcm90b2NvbCIsImhvc3QiLCJwYXRobmFtZSIsImVuZHNXaXRoIiwid3MiLCJXZWJTb2NrZXQiLCJjb25uZWN0ZWQiLCJzbGljZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJnYW1lX3N0YXRlIiwiZm91cl9jb2xvciIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZW5kZXJVSSIsIlJlYWN0RE9NIiwiRXJyb3JzIiwiSm9pblJvb20iLCJzZXRJdGVtIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIkluaXRpYWxpemUiLCJEcmF3IiwiRXhjaGFuZ2UiLCJQbGF5IiwiRG9uZSIsIkNoYXQiLCJvbm9wZW4iLCJvbmNsb3NlIiwib25tZXNzYWdlIiwibXNnIiwicGFyc2UiLCJkYXRhIiwic2hpZnQiLCJCcm9hZGNhc3QiLCJFcnJvciIsImZpbHRlciIsIlN0YXRlIiwiY2xvc2UiLCJBdWRpb0NvbnRleHQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hF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ZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBlID0gUmVhY3QuY3JlYXRlRWxlbWVudDtcbmNvbnN0IENBUkRfTFVUOiB7IFtkZXRhaWxzOiBzdHJpbmddOiBJQ2FyZEluZm8gfSA9IHt9O1xuQ0FSRFMuZm9yRWFjaCgoYykgPT4ge1xuICBDQVJEX0xVVFtjLnZhbHVlXSA9IGM7XG59KTtcblxuaW50ZXJmYWNlIElJbml0aWFsaXplUHJvcHMge1xuICBzdGF0ZTogSUluaXRpYWxpemVQaGFzZTtcbiAgY2FyZHM6IHN0cmluZ1tdO1xuICBuYW1lOiBzdHJpbmc7XG59XG5jbGFzcyBJbml0aWFsaXplIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElJbml0aWFsaXplUHJvcHMsIHt9PiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBJSW5pdGlhbGl6ZVByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc2V0R2FtZU1vZGUgPSB0aGlzLnNldEdhbWVNb2RlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zdGFydEdhbWUgPSB0aGlzLnN0YXJ0R2FtZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0S2l0dHlTaXplID0gdGhpcy5zZXRLaXR0eVNpemUuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHNldEdhbWVNb2RlKGV2dDogYW55KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKGV2dC50YXJnZXQudmFsdWUgPT0gXCJUcmFjdG9yXCIpIHtcbiAgICAgIHNlbmQoeyBBY3Rpb246IHsgU2V0R2FtZU1vZGU6IFwiVHJhY3RvclwiIH0gfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbmQoe1xuICAgICAgICBBY3Rpb246IHtcbiAgICAgICAgICBTZXRHYW1lTW9kZToge1xuICAgICAgICAgICAgRmluZGluZ0ZyaWVuZHM6IHtcbiAgICAgICAgICAgICAgbnVtX2ZyaWVuZHM6IDAsXG4gICAgICAgICAgICAgIGZyaWVuZHM6IFtdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc2V0S2l0dHlTaXplKGV2dDogYW55KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKGV2dC50YXJnZXQudmFsdWUgIT0gXCJcIikge1xuICAgICAgY29uc3Qgc2l6ZSA9IHBhcnNlSW50KGV2dC50YXJnZXQudmFsdWUsIDEwKTtcbiAgICAgIHNlbmQoe1xuICAgICAgICBBY3Rpb246IHtcbiAgICAgICAgICBTZXRLaXR0eVNpemU6IHNpemUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdGFydEdhbWUoZXZ0OiBhbnkpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBzZW5kKHsgQWN0aW9uOiBcIlN0YXJ0R2FtZVwiIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IG1vZGVfYXNfc3RyaW5nID1cbiAgICAgIHRoaXMucHJvcHMuc3RhdGUuZ2FtZV9tb2RlID09IFwiVHJhY3RvclwiID8gXCJUcmFjdG9yXCIgOiBcIkZpbmRpbmdGcmllbmRzXCI7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxHYW1lTW9kZSBnYW1lX21vZGU9e3RoaXMucHJvcHMuc3RhdGUuZ2FtZV9tb2RlfSAvPlxuICAgICAgICA8UGxheWVyc1xuICAgICAgICAgIHBsYXllcnM9e3RoaXMucHJvcHMuc3RhdGUucGxheWVyc31cbiAgICAgICAgICBsYW5kbG9yZD17dGhpcy5wcm9wcy5zdGF0ZS5sYW5kbG9yZH1cbiAgICAgICAgICBuZXh0PXtudWxsfVxuICAgICAgICAgIG1vdmFibGU9e3RydWV9XG4gICAgICAgICAgbmFtZT17dGhpcy5wcm9wcy5uYW1lfVxuICAgICAgICAvPlxuICAgICAgICA8cD5cbiAgICAgICAgICBTZW5kIHRoZSBsaW5rIHRvIG90aGVyIHBsYXllcnMgdG8gYWxsb3cgdGhlbSB0byBqb2luIHRoZSBnYW1lOntcIiBcIn1cbiAgICAgICAgICA8YSBocmVmPXt3aW5kb3cubG9jYXRpb24uaHJlZn0gdGFyZ2V0PVwiX2JsYW5rXCI+XG4gICAgICAgICAgICA8Y29kZT57d2luZG93LmxvY2F0aW9uLmhyZWZ9PC9jb2RlPlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9wPlxuICAgICAgICA8c2VsZWN0IHZhbHVlPXttb2RlX2FzX3N0cmluZ30gb25DaGFuZ2U9e3RoaXMuc2V0R2FtZU1vZGV9PlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJUcmFjdG9yXCI+5Y2H57qnIC8gVHJhY3Rvcjwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJGaW5kaW5nRnJpZW5kc1wiPuaJvuaci+WPiyAvIEZpbmRpbmcgRnJpZW5kczwvb3B0aW9uPlxuICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgPE51bURlY2tzU2VsZWN0b3JcbiAgICAgICAgICBudW1fZGVja3M9e3RoaXMucHJvcHMuc3RhdGUubnVtX2RlY2tzfVxuICAgICAgICAgIHBsYXllcnM9e3RoaXMucHJvcHMuc3RhdGUucGxheWVyc31cbiAgICAgICAgLz5cbiAgICAgICAge3RoaXMucHJvcHMuc3RhdGUucGxheWVycy5sZW5ndGggPj0gNCA/IChcbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuc3RhcnRHYW1lfT5TdGFydCBnYW1lPC9idXR0b24+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPHA+V2FpdGluZyBmb3IgcGxheWVycy4uLjwvcD5cbiAgICAgICAgKX1cbiAgICAgICAgPEtpY2tlciBwbGF5ZXJzPXt0aGlzLnByb3BzLnN0YXRlLnBsYXllcnN9IC8+XG4gICAgICAgIDxMYW5kbG9yZFNlbGVjdG9yXG4gICAgICAgICAgcGxheWVycz17dGhpcy5wcm9wcy5zdGF0ZS5wbGF5ZXJzfVxuICAgICAgICAgIGxhbmRsb3JkPXt0aGlzLnByb3BzLnN0YXRlLmxhbmRsb3JkfVxuICAgICAgICAvPlxuICAgICAgICA8UmFua1NlbGVjdG9yXG4gICAgICAgICAgcGxheWVycz17dGhpcy5wcm9wcy5zdGF0ZS5wbGF5ZXJzfVxuICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgICBudW1fZGVja3M9e3RoaXMucHJvcHMuc3RhdGUubnVtX2RlY2tzfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgSURyYXdQcm9wcyB7XG4gIHN0YXRlOiBJRHJhd1BoYXNlO1xuICBuYW1lOiBzdHJpbmc7XG4gIGNhcmRzOiBzdHJpbmdbXTtcbn1cbmludGVyZmFjZSBJRHJhd1N0YXRlIHtcbiAgc2VsZWN0ZWQ6IHN0cmluZ1tdO1xuICBhdXRvZHJhdzogYm9vbGVhbjtcbn1cbmNsYXNzIERyYXcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SURyYXdQcm9wcywgSURyYXdTdGF0ZT4ge1xuICBwcml2YXRlIGNvdWxkX2RyYXc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSB0aW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogSURyYXdQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2VsZWN0ZWQ6IFtdLFxuICAgICAgYXV0b2RyYXc6IHRydWUsXG4gICAgfTtcbiAgICB0aGlzLnNldFNlbGVjdGVkID0gdGhpcy5zZXRTZWxlY3RlZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMubWFrZUJpZCA9IHRoaXMubWFrZUJpZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZHJhd0NhcmQgPSB0aGlzLmRyYXdDYXJkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkF1dG9kcmF3Q2xpY2tlZCA9IHRoaXMub25BdXRvZHJhd0NsaWNrZWQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHNldFNlbGVjdGVkKG5ld19zZWxlY3RlZDogc3RyaW5nW10pIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWQ6IG5ld19zZWxlY3RlZCB9KTtcbiAgfVxuXG4gIG1ha2VCaWQoZXZ0OiBhbnkpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBjb3VudHM6IHsgW2NhcmQ6IHN0cmluZ106IG51bWJlciB9ID0ge307XG4gICAgdGhpcy5zdGF0ZS5zZWxlY3RlZC5mb3JFYWNoKChjKSA9PiAoY291bnRzW2NdID0gKGNvdW50c1tjXSB8fCAwKSArIDEpKTtcbiAgICBpZiAoT2JqZWN0LmtleXMoY291bnRzKS5sZW5ndGggIT0gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBsYXllcnM6IHsgW3BsYXllcl9pZDogbnVtYmVyXTogSVBsYXllciB9ID0ge307XG4gICAgdGhpcy5wcm9wcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2goKHApID0+IHtcbiAgICAgIHBsYXllcnNbcC5pZF0gPSBwO1xuICAgIH0pO1xuXG4gICAgZm9yIChjb25zdCBjIGluIGNvdW50cykge1xuICAgICAgbGV0IGFscmVhZHlfYmlkID0gMDtcbiAgICAgIHRoaXMucHJvcHMuc3RhdGUuYmlkcy5mb3JFYWNoKChiaWQpID0+IHtcbiAgICAgICAgaWYgKHBsYXllcnNbYmlkLmlkXS5uYW1lID09IHRoaXMucHJvcHMubmFtZSAmJiBiaWQuY2FyZCA9PSBjKSB7XG4gICAgICAgICAgYWxyZWFkeV9iaWQgPSBhbHJlYWR5X2JpZCA8IGJpZC5jb3VudCA/IGJpZC5jb3VudCA6IGFscmVhZHlfYmlkO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc2VuZCh7IEFjdGlvbjogeyBCaWQ6IFtjLCBjb3VudHNbY10gKyBhbHJlYWR5X2JpZF0gfSB9KTtcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWQoW10pO1xuICAgIH1cbiAgfVxuXG4gIGRyYXdDYXJkKCkge1xuICAgIGNvbnN0IGNhbl9kcmF3ID1cbiAgICAgIHRoaXMucHJvcHMuc3RhdGUucGxheWVyc1t0aGlzLnByb3BzLnN0YXRlLnBvc2l0aW9uXS5uYW1lID09XG4gICAgICB0aGlzLnByb3BzLm5hbWU7XG4gICAgaWYgKHRoaXMudGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgICB0aGlzLnRpbWVvdXQgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoY2FuX2RyYXcpIHtcbiAgICAgIHNlbmQoeyBBY3Rpb246IFwiRHJhd0NhcmRcIiB9KTtcbiAgICB9XG4gIH1cblxuICBwaWNrVXBLaXR0eShldnQ6IGFueSkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNlbmQoeyBBY3Rpb246IFwiUGlja1VwS2l0dHlcIiB9KTtcbiAgfVxuXG4gIG9uQXV0b2RyYXdDbGlja2VkKGV2dDogYW55KSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBhdXRvZHJhdzogZXZ0LnRhcmdldC5jaGVja2VkLFxuICAgIH0pO1xuICAgIGlmIChldnQudGFyZ2V0LmNoZWNrZWQpIHtcbiAgICAgIHRoaXMuZHJhd0NhcmQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMudGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgY2FuX2RyYXcgPVxuICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5wbGF5ZXJzW3RoaXMucHJvcHMuc3RhdGUucG9zaXRpb25dLm5hbWUgPT1cbiAgICAgICAgdGhpcy5wcm9wcy5uYW1lICYmIHRoaXMucHJvcHMuc3RhdGUuZGVjay5sZW5ndGggPiAwO1xuICAgIGlmIChcbiAgICAgIGNhbl9kcmF3ICYmXG4gICAgICAhdGhpcy5jb3VsZF9kcmF3ICYmXG4gICAgICB0aGlzLnRpbWVvdXQgPT0gbnVsbCAmJlxuICAgICAgdGhpcy5zdGF0ZS5hdXRvZHJhd1xuICAgICkge1xuICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZHJhd0NhcmQoKTtcbiAgICAgIH0sIDI1MCk7XG4gICAgfVxuICAgIHRoaXMuY291bGRfZHJhdyA9IGNhbl9kcmF3O1xuXG4gICAgbGV0IG5leHQgPSB0aGlzLnByb3BzLnN0YXRlLnBsYXllcnNbdGhpcy5wcm9wcy5zdGF0ZS5wb3NpdGlvbl0uaWQ7XG4gICAgbGV0IG5leHRfaWR4ID0gdGhpcy5wcm9wcy5zdGF0ZS5wb3NpdGlvbjtcbiAgICBpZiAodGhpcy5wcm9wcy5zdGF0ZS5kZWNrLmxlbmd0aCA9PSAwICYmIHRoaXMucHJvcHMuc3RhdGUuYmlkcy5sZW5ndGggPiAwKSB7XG4gICAgICBuZXh0ID0gdGhpcy5wcm9wcy5zdGF0ZS5iaWRzW3RoaXMucHJvcHMuc3RhdGUuYmlkcy5sZW5ndGggLSAxXS5pZDtcblxuICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2goKHBsYXllciwgaWR4KSA9PiB7XG4gICAgICAgIGlmIChwbGF5ZXIuaWQgPT0gbmV4dCkge1xuICAgICAgICAgIG5leHRfaWR4ID0gaWR4O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBwbGF5ZXJzOiB7IFtwbGF5ZXJfaWQ6IG51bWJlcl06IElQbGF5ZXIgfSA9IHt9O1xuICAgIHRoaXMucHJvcHMuc3RhdGUucGxheWVycy5mb3JFYWNoKChwKSA9PiB7XG4gICAgICBwbGF5ZXJzW3AuaWRdID0gcDtcbiAgICB9KTtcblxuICAgIGNvbnN0IG15X2JpZHM6IHsgW2NhcmQ6IHN0cmluZ106IG51bWJlciB9ID0ge307XG4gICAgdGhpcy5wcm9wcy5zdGF0ZS5iaWRzLmZvckVhY2goKGJpZCkgPT4ge1xuICAgICAgaWYgKHBsYXllcnNbYmlkLmlkXS5uYW1lID09IHRoaXMucHJvcHMubmFtZSkge1xuICAgICAgICBjb25zdCBleGlzdGluZ19iaWQgPSBteV9iaWRzW2JpZC5jYXJkXSB8fCAwO1xuICAgICAgICBteV9iaWRzW2JpZC5jYXJkXSA9IGV4aXN0aW5nX2JpZCA8IGJpZC5jb3VudCA/IGJpZC5jb3VudCA6IGV4aXN0aW5nX2JpZDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgY2FyZHNfbm90X2JpZCA9IFsuLi50aGlzLnByb3BzLmNhcmRzXTtcblxuICAgIE9iamVjdC5rZXlzKG15X2JpZHMpLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNvbnN0IGNvdW50ID0gbXlfYmlkc1tjYXJkXSB8fCAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSA9IGkgKyAxKSB7XG4gICAgICAgIGNvbnN0IGNhcmRfaWR4ID0gY2FyZHNfbm90X2JpZC5pbmRleE9mKGNhcmQpO1xuICAgICAgICBpZiAoY2FyZF9pZHggPj0gMCkge1xuICAgICAgICAgIGNhcmRzX25vdF9iaWQuc3BsaWNlKGNhcmRfaWR4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxHYW1lTW9kZSBnYW1lX21vZGU9e3RoaXMucHJvcHMuc3RhdGUuZ2FtZV9tb2RlfSAvPlxuICAgICAgICA8UGxheWVyc1xuICAgICAgICAgIHBsYXllcnM9e3RoaXMucHJvcHMuc3RhdGUucGxheWVyc31cbiAgICAgICAgICBsYW5kbG9yZD17dGhpcy5wcm9wcy5zdGF0ZS5sYW5kbG9yZH1cbiAgICAgICAgICBuZXh0PXtuZXh0fVxuICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgLz5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8aDI+QmlkczwvaDI+XG4gICAgICAgICAge3RoaXMucHJvcHMuc3RhdGUuYmlkcy5tYXAoKGJpZCwgaWR4KSA9PiB7XG4gICAgICAgICAgICBsZXQgbmFtZSA9IFwidW5rbm93blwiO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2goKHBsYXllcikgPT4ge1xuICAgICAgICAgICAgICBpZiAocGxheWVyLmlkID09IGJpZC5pZCkge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBwbGF5ZXIubmFtZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8TGFiZWxlZFBsYXlcbiAgICAgICAgICAgICAgICBsYWJlbD17bmFtZX1cbiAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICBjYXJkcz17QXJyYXkoYmlkLmNvdW50KS5maWxsKGJpZC5jYXJkKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17KGV2dDogYW55KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd0NhcmQoKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIGRpc2FibGVkPXshY2FuX2RyYXd9XG4gICAgICAgID5cbiAgICAgICAgICBEcmF3IGNhcmRcbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxsYWJlbD5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICBuYW1lPVwiYXV0b2RyYXdcIlxuICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5hdXRvZHJhd31cbiAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQXV0b2RyYXdDbGlja2VkfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvbGFiZWw+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLm1ha2VCaWR9XG4gICAgICAgICAgZGlzYWJsZWQ9e3RoaXMuc3RhdGUuc2VsZWN0ZWQubGVuZ3RoID09IDB9XG4gICAgICAgID5cbiAgICAgICAgICBNYWtlIGJpZFxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucGlja1VwS2l0dHl9XG4gICAgICAgICAgZGlzYWJsZWQ9e1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5kZWNrLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgIHRoaXMucHJvcHMuc3RhdGUuYmlkcy5sZW5ndGggPT0gMFxuICAgICAgICAgIH1cbiAgICAgICAgPlxuICAgICAgICAgIFBpY2sgdXAgY2FyZHMgZnJvbSB0aGUgYm90dG9tXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8Q2FyZHNcbiAgICAgICAgICBjYXJkcz17Y2FyZHNfbm90X2JpZH1cbiAgICAgICAgICBzZWxlY3RlZD17dGhpcy5zdGF0ZS5zZWxlY3RlZH1cbiAgICAgICAgICBzZXRTZWxlY3RlZD17dGhpcy5zZXRTZWxlY3RlZH1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuaW50ZXJmYWNlIElFeGNoYW5nZVByb3BzIHtcbiAgc3RhdGU6IElFeGNoYW5nZVBoYXNlO1xuICBuYW1lOiBzdHJpbmc7XG4gIGNhcmRzOiBzdHJpbmdbXTtcbn1cbmludGVyZmFjZSBJRXhjaGFuZ2VTdGF0ZSB7XG4gIGZyaWVuZHM6IElGcmllbmRbXTtcbn1cbmNsYXNzIEV4Y2hhbmdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElFeGNoYW5nZVByb3BzLCBJRXhjaGFuZ2VTdGF0ZT4ge1xuICBjb25zdHJ1Y3Rvcihwcm9wczogSUV4Y2hhbmdlUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5tb3ZlQ2FyZFRvS2l0dHkgPSB0aGlzLm1vdmVDYXJkVG9LaXR0eS5iaW5kKHRoaXMpO1xuICAgIHRoaXMubW92ZUNhcmRUb0hhbmQgPSB0aGlzLm1vdmVDYXJkVG9IYW5kLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zdGFydEdhbWUgPSB0aGlzLnN0YXJ0R2FtZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucGlja0ZyaWVuZHMgPSB0aGlzLnBpY2tGcmllbmRzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGZyaWVuZHM6IFtdLFxuICAgIH07XG5cbiAgICB0aGlzLmZpeEZyaWVuZHMgPSB0aGlzLmZpeEZyaWVuZHMuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGZpeEZyaWVuZHMoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuc3RhdGUuZ2FtZV9tb2RlICE9IFwiVHJhY3RvclwiKSB7XG4gICAgICBjb25zdCBnYW1lX21vZGUgPSB0aGlzLnByb3BzLnN0YXRlLmdhbWVfbW9kZS5GaW5kaW5nRnJpZW5kcztcbiAgICAgIGNvbnN0IG51bV9mcmllbmRzID0gZ2FtZV9tb2RlLm51bV9mcmllbmRzO1xuICAgICAgY29uc3QgcHJvcF9mcmllbmRzID0gZ2FtZV9tb2RlLmZyaWVuZHM7XG4gICAgICBpZiAobnVtX2ZyaWVuZHMgIT0gdGhpcy5zdGF0ZS5mcmllbmRzLmxlbmd0aCkge1xuICAgICAgICBpZiAocHJvcF9mcmllbmRzLmxlbmd0aCAhPSBudW1fZnJpZW5kcykge1xuICAgICAgICAgIGNvbnN0IGZyaWVuZHMgPSBbLi4udGhpcy5zdGF0ZS5mcmllbmRzXTtcbiAgICAgICAgICB3aGlsZSAoZnJpZW5kcy5sZW5ndGggPCBudW1fZnJpZW5kcykge1xuICAgICAgICAgICAgZnJpZW5kcy5wdXNoKHtcbiAgICAgICAgICAgICAgY2FyZDogXCJcIixcbiAgICAgICAgICAgICAgc2tpcDogMCxcbiAgICAgICAgICAgICAgcGxheWVyX2lkOiBudWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHdoaWxlIChmcmllbmRzLmxlbmd0aCA+IG51bV9mcmllbmRzKSB7XG4gICAgICAgICAgICBmcmllbmRzLnBvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZnJpZW5kczogZnJpZW5kcyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZnJpZW5kczogcHJvcF9mcmllbmRzIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLmZyaWVuZHMubGVuZ3RoICE9IDApIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGZyaWVuZHM6IFtdIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuZml4RnJpZW5kcygpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMuZml4RnJpZW5kcygpO1xuICB9XG5cbiAgbW92ZUNhcmRUb0tpdHR5KGNhcmQ6IHN0cmluZykge1xuICAgIHNlbmQoeyBBY3Rpb246IHsgTW92ZUNhcmRUb0tpdHR5OiBjYXJkIH0gfSk7XG4gIH1cblxuICBtb3ZlQ2FyZFRvSGFuZChjYXJkOiBzdHJpbmcpIHtcbiAgICBzZW5kKHsgQWN0aW9uOiB7IE1vdmVDYXJkVG9IYW5kOiBjYXJkIH0gfSk7XG4gIH1cblxuICBzdGFydEdhbWUoZXZ0OiBhbnkpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBzZW5kKHsgQWN0aW9uOiBcIkJlZ2luUGxheVwiIH0pO1xuICB9XG5cbiAgcGlja0ZyaWVuZHMoZXZ0OiBhbnkpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoXG4gICAgICB0aGlzLnByb3BzLnN0YXRlLmdhbWVfbW9kZSAhPSBcIlRyYWN0b3JcIiAmJlxuICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5nYW1lX21vZGUuRmluZGluZ0ZyaWVuZHMubnVtX2ZyaWVuZHMgPT1cbiAgICAgICAgdGhpcy5zdGF0ZS5mcmllbmRzLmxlbmd0aFxuICAgICkge1xuICAgICAgc2VuZCh7XG4gICAgICAgIEFjdGlvbjoge1xuICAgICAgICAgIFNldEZyaWVuZHM6IHRoaXMuc3RhdGUuZnJpZW5kcyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQgbGFuZGxvcmRfaWR4ID0gMDtcbiAgICB0aGlzLnByb3BzLnN0YXRlLnBsYXllcnMuZm9yRWFjaCgocGxheWVyLCBpZHgpID0+IHtcbiAgICAgIGlmIChwbGF5ZXIuaWQgPT0gdGhpcy5wcm9wcy5zdGF0ZS5sYW5kbG9yZCkge1xuICAgICAgICBsYW5kbG9yZF9pZHggPSBpZHg7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHRoaXMucHJvcHMuc3RhdGUucGxheWVyc1tsYW5kbG9yZF9pZHhdLm5hbWUgPT0gdGhpcy5wcm9wcy5uYW1lKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxHYW1lTW9kZSBnYW1lX21vZGU9e3RoaXMucHJvcHMuc3RhdGUuZ2FtZV9tb2RlfSAvPlxuICAgICAgICAgIDxQbGF5ZXJzXG4gICAgICAgICAgICBwbGF5ZXJzPXt0aGlzLnByb3BzLnN0YXRlLnBsYXllcnN9XG4gICAgICAgICAgICBsYW5kbG9yZD17dGhpcy5wcm9wcy5zdGF0ZS5sYW5kbG9yZH1cbiAgICAgICAgICAgIG5leHQ9e3RoaXMucHJvcHMuc3RhdGUubGFuZGxvcmR9XG4gICAgICAgICAgICBuYW1lPXt0aGlzLnByb3BzLm5hbWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8VHJ1bXAgdHJ1bXA9e3RoaXMucHJvcHMuc3RhdGUudHJ1bXB9IC8+XG4gICAgICAgICAge3RoaXMucHJvcHMuc3RhdGUuZ2FtZV9tb2RlICE9IFwiVHJhY3RvclwiID8gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPEZyaWVuZHMgZ2FtZV9tb2RlPXt0aGlzLnByb3BzLnN0YXRlLmdhbWVfbW9kZX0gLz5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZnJpZW5kcy5tYXAoKGZyaWVuZCwgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb25DaGFuZ2UgPSAoeDogSUZyaWVuZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3X2ZyaWVuZHMgPSBbLi4udGhpcy5zdGF0ZS5mcmllbmRzXTtcbiAgICAgICAgICAgICAgICAgIG5ld19mcmllbmRzW2lkeF0gPSB4O1xuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGZyaWVuZHM6IG5ld19mcmllbmRzIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxGcmllbmRTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgZnJpZW5kPXtmcmllbmR9XG4gICAgICAgICAgICAgICAgICAgIHRydW1wPXt0aGlzLnByb3BzLnN0YXRlLnRydW1wfVxuICAgICAgICAgICAgICAgICAgICBudW1fZGVja3M9e3RoaXMucHJvcHMuc3RhdGUubnVtX2RlY2tzfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLnBpY2tGcmllbmRzfT5QaWNrIGZyaWVuZHM8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIDxoMj5Zb3VyIGhhbmQ8L2gyPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGFuZFwiPlxuICAgICAgICAgICAge3RoaXMucHJvcHMuY2FyZHMubWFwKChjLCBpZHgpID0+IChcbiAgICAgICAgICAgICAgPENhcmRcbiAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLm1vdmVDYXJkVG9LaXR0eShjKX1cbiAgICAgICAgICAgICAgICBjYXJkPXtjfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGgyPlxuICAgICAgICAgICAgRGlzY2FyZGVkIGNhcmRze1wiIFwifVxuICAgICAgICAgICAge3RoaXMucHJvcHMuc3RhdGUua2l0dHkubGVuZ3RoIC8gdGhpcy5wcm9wcy5zdGF0ZS5raXR0eV9zaXplfVxuICAgICAgICAgIDwvaDI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJraXR0eVwiPlxuICAgICAgICAgICAge3RoaXMucHJvcHMuc3RhdGUua2l0dHkubWFwKChjLCBpZHgpID0+IChcbiAgICAgICAgICAgICAgPENhcmQga2V5PXtpZHh9IG9uQ2xpY2s9eygpID0+IHRoaXMubW92ZUNhcmRUb0hhbmQoYyl9IGNhcmQ9e2N9IC8+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnN0YXJ0R2FtZX1cbiAgICAgICAgICAgIGRpc2FibGVkPXtcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5raXR0eS5sZW5ndGggIT0gdGhpcy5wcm9wcy5zdGF0ZS5raXR0eV9zaXplXG4gICAgICAgICAgICB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgU3RhcnQgZ2FtZVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPEdhbWVNb2RlIGdhbWVfbW9kZT17dGhpcy5wcm9wcy5zdGF0ZS5nYW1lX21vZGV9IC8+XG4gICAgICAgICAgPFBsYXllcnNcbiAgICAgICAgICAgIHBsYXllcnM9e3RoaXMucHJvcHMuc3RhdGUucGxheWVyc31cbiAgICAgICAgICAgIGxhbmRsb3JkPXt0aGlzLnByb3BzLnN0YXRlLmxhbmRsb3JkfVxuICAgICAgICAgICAgbmV4dD17dGhpcy5wcm9wcy5zdGF0ZS5sYW5kbG9yZH1cbiAgICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxUcnVtcCB0cnVtcD17dGhpcy5wcm9wcy5zdGF0ZS50cnVtcH0gLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhhbmRcIj5cbiAgICAgICAgICAgIHt0aGlzLnByb3BzLmNhcmRzLm1hcCgoYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgIDxDYXJkIGtleT17aWR4fSBjYXJkPXtjfSAvPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHA+V2FpdGluZy4uLjwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5pbnRlcmZhY2UgSVBsYXlQcm9wcyB7XG4gIHN0YXRlOiBJUGxheVBoYXNlO1xuICBuYW1lOiBzdHJpbmc7XG4gIGNhcmRzOiBzdHJpbmdbXTtcbiAgYmVlcF9vbl90dXJuOiBib29sZWFuO1xuICBzaG93X2xhc3RfdHJpY2s6IGJvb2xlYW47XG59XG5pbnRlcmZhY2UgSVBsYXlTdGF0ZSB7XG4gIHNlbGVjdGVkOiBzdHJpbmdbXTtcbn1cbmNsYXNzIFBsYXkgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVBsYXlQcm9wcywgSVBsYXlTdGF0ZT4ge1xuICBwcml2YXRlIHdhc19teV90dXJuOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IElQbGF5UHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHNlbGVjdGVkOiBbXSxcbiAgICB9O1xuICAgIHRoaXMuc2V0U2VsZWN0ZWQgPSB0aGlzLnNldFNlbGVjdGVkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5wbGF5Q2FyZHMgPSB0aGlzLnBsYXlDYXJkcy5iaW5kKHRoaXMpO1xuICAgIHRoaXMudGFrZUJhY2tDYXJkcyA9IHRoaXMudGFrZUJhY2tDYXJkcy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZW5kVHJpY2sgPSB0aGlzLmVuZFRyaWNrLmJpbmQodGhpcyk7XG4gIH1cblxuICBzZXRTZWxlY3RlZChuZXdfc2VsZWN0ZWQ6IHN0cmluZ1tdKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNlbGVjdGVkOiBuZXdfc2VsZWN0ZWQgfSk7XG4gIH1cblxuICBwbGF5Q2FyZHMoZXZ0OiBhbnkpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBzZW5kKHsgQWN0aW9uOiB7IFBsYXlDYXJkczogdGhpcy5zdGF0ZS5zZWxlY3RlZCB9IH0pO1xuICAgIHRoaXMuc2V0U2VsZWN0ZWQoW10pO1xuICB9XG5cbiAgdGFrZUJhY2tDYXJkcyhldnQ6IGFueSkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNlbmQoeyBBY3Rpb246IFwiVGFrZUJhY2tDYXJkc1wiIH0pO1xuICB9XG5cbiAgZW5kVHJpY2soZXZ0OiBhbnkpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBzZW5kKHsgQWN0aW9uOiBcIkVuZFRyaWNrXCIgfSk7XG4gIH1cblxuICBzdGFydE5ld0dhbWUoZXZ0OiBhbnkpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBzZW5kKHsgQWN0aW9uOiBcIlN0YXJ0TmV3R2FtZVwiIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IG5leHQgPSB0aGlzLnByb3BzLnN0YXRlLnRyaWNrLnBsYXllcl9xdWV1ZVswXTtcbiAgICBsZXQgY2FuX3Rha2VfYmFjayA9IGZhbHNlO1xuICAgIGxldCBjYW5fcGxheSA9IGZhbHNlO1xuICAgIGxldCBpc19teV90dXJuID0gZmFsc2U7XG4gICAgdGhpcy5wcm9wcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2goKHApID0+IHtcbiAgICAgIGlmIChwLm5hbWUgPT0gdGhpcy5wcm9wcy5uYW1lKSB7XG4gICAgICAgIGNvbnN0IGxhc3RfcGxheSA9IHRoaXMucHJvcHMuc3RhdGUudHJpY2sucGxheWVkX2NhcmRzW1xuICAgICAgICAgIHRoaXMucHJvcHMuc3RhdGUudHJpY2sucGxheWVkX2NhcmRzLmxlbmd0aCAtIDFcbiAgICAgICAgXTtcbiAgICAgICAgaWYgKHAuaWQgPT0gbmV4dCkge1xuICAgICAgICAgIGlzX215X3R1cm4gPSB0cnVlO1xuICAgICAgICAgIGlmIChsYXN0X3BsYXkpIHtcbiAgICAgICAgICAgIGNhbl9wbGF5ID0gdGhpcy5zdGF0ZS5zZWxlY3RlZC5sZW5ndGggPT0gbGFzdF9wbGF5LmNhcmRzLmxlbmd0aDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FuX3BsYXkgPSB0aGlzLnN0YXRlLnNlbGVjdGVkLmxlbmd0aCA+IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0X3BsYXkgJiYgcC5pZCA9PSBsYXN0X3BsYXkuaWQpIHtcbiAgICAgICAgICBjYW5fdGFrZV9iYWNrID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGlmICh0aGlzLnByb3BzLmJlZXBfb25fdHVybiAmJiBpc19teV90dXJuICYmICF0aGlzLndhc19teV90dXJuKSB7XG4gICAgICBiZWVwKDMsIDQ0MCwgMjAwKTtcbiAgICB9XG4gICAgdGhpcy53YXNfbXlfdHVybiA9IGlzX215X3R1cm47XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPEdhbWVNb2RlIGdhbWVfbW9kZT17dGhpcy5wcm9wcy5zdGF0ZS5nYW1lX21vZGV9IC8+XG4gICAgICAgIDxQbGF5ZXJzXG4gICAgICAgICAgcGxheWVycz17dGhpcy5wcm9wcy5zdGF0ZS5wbGF5ZXJzfVxuICAgICAgICAgIGxhbmRsb3JkPXt0aGlzLnByb3BzLnN0YXRlLmxhbmRsb3JkfVxuICAgICAgICAgIGxhbmRsb3Jkc190ZWFtPXt0aGlzLnByb3BzLnN0YXRlLmxhbmRsb3Jkc190ZWFtfVxuICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgICBuZXh0PXtuZXh0fVxuICAgICAgICAvPlxuICAgICAgICA8VHJ1bXAgdHJ1bXA9e3RoaXMucHJvcHMuc3RhdGUudHJ1bXB9IC8+XG4gICAgICAgIDxGcmllbmRzIGdhbWVfbW9kZT17dGhpcy5wcm9wcy5zdGF0ZS5nYW1lX21vZGV9IC8+XG4gICAgICAgIDxUcmlja1xuICAgICAgICAgIHRyaWNrPXt0aGlzLnByb3BzLnN0YXRlLnRyaWNrfVxuICAgICAgICAgIHBsYXllcnM9e3RoaXMucHJvcHMuc3RhdGUucGxheWVyc31cbiAgICAgICAgLz5cbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLnBsYXlDYXJkc30gZGlzYWJsZWQ9eyFjYW5fcGxheX0+XG4gICAgICAgICAgUGxheSBzZWxlY3RlZCBjYXJkc1xuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLnRha2VCYWNrQ2FyZHN9IGRpc2FibGVkPXshY2FuX3Rha2VfYmFja30+XG4gICAgICAgICAgVGFrZSBiYWNrIGxhc3QgcGxheVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuZW5kVHJpY2t9XG4gICAgICAgICAgZGlzYWJsZWQ9e3RoaXMucHJvcHMuc3RhdGUudHJpY2sucGxheWVyX3F1ZXVlLmxlbmd0aCA+IDB9XG4gICAgICAgID5cbiAgICAgICAgICBGaW5pc2ggdHJpY2tcbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIHt0aGlzLnByb3BzLmNhcmRzLmxlbmd0aCA9PSAwID8gKFxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5zdGFydE5ld0dhbWV9PkZpbmlzaCBnYW1lPC9idXR0b24+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgICAsXG4gICAgICAgIDxDYXJkc1xuICAgICAgICAgIGNhcmRzPXt0aGlzLnByb3BzLmNhcmRzfVxuICAgICAgICAgIHNlbGVjdGVkPXt0aGlzLnN0YXRlLnNlbGVjdGVkfVxuICAgICAgICAgIHNldFNlbGVjdGVkPXt0aGlzLnNldFNlbGVjdGVkfVxuICAgICAgICAvPlxuICAgICAgICB7dGhpcy5wcm9wcy5zdGF0ZS5sYXN0X3RyaWNrICYmIHRoaXMucHJvcHMuc2hvd19sYXN0X3RyaWNrID8gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8cD5QcmV2aW91cyB0cmljazwvcD5cbiAgICAgICAgICAgIDxUcmlja1xuICAgICAgICAgICAgICB0cmljaz17dGhpcy5wcm9wcy5zdGF0ZS5sYXN0X3RyaWNrfVxuICAgICAgICAgICAgICBwbGF5ZXJzPXt0aGlzLnByb3BzLnN0YXRlLnBsYXllcnN9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPFBvaW50c1xuICAgICAgICAgIHBvaW50cz17dGhpcy5wcm9wcy5zdGF0ZS5wb2ludHN9XG4gICAgICAgICAgcGxheWVycz17dGhpcy5wcm9wcy5zdGF0ZS5wbGF5ZXJzfVxuICAgICAgICAgIGxhbmRsb3Jkc190ZWFtPXt0aGlzLnByb3BzLnN0YXRlLmxhbmRsb3Jkc190ZWFtfVxuICAgICAgICAvPlxuICAgICAgICA8TGFiZWxlZFBsYXkgY2FyZHM9e3RoaXMucHJvcHMuc3RhdGUua2l0dHl9IGxhYmVsPVwi5bqV54mMXCIgLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuY2xhc3MgVHJpY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8eyBwbGF5ZXJzOiBJUGxheWVyW107IHRyaWNrOiBJVHJpY2sgfSwge30+IHtcbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IG5hbWVzX2J5X2lkOiB7IFtwbGF5ZXJfaWQ6IG51bWJlcl06IHN0cmluZyB9ID0ge307XG4gICAgdGhpcy5wcm9wcy5wbGF5ZXJzLmZvckVhY2goKHApID0+IHtcbiAgICAgIG5hbWVzX2J5X2lkW3AuaWRdID0gcC5uYW1lO1xuICAgIH0pO1xuICAgIGNvbnN0IGJsYW5rX2NhcmRzID1cbiAgICAgIHRoaXMucHJvcHMudHJpY2sucGxheWVkX2NhcmRzLmxlbmd0aCA+IDBcbiAgICAgICAgPyBBcnJheSh0aGlzLnByb3BzLnRyaWNrLnBsYXllZF9jYXJkc1swXS5jYXJkcy5sZW5ndGgpLmZpbGwoXCLwn4KgXCIpXG4gICAgICAgIDogW1wi8J+CoFwiXTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInRyaWNrXCI+XG4gICAgICAgIHt0aGlzLnByb3BzLnRyaWNrLnBsYXllZF9jYXJkcy5tYXAoKHBsYXllZCwgaWR4KSA9PiB7XG4gICAgICAgICAgY29uc3Qgd2lubmluZyA9IHRoaXMucHJvcHMudHJpY2suY3VycmVudF93aW5uZXIgPT0gcGxheWVkLmlkO1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8TGFiZWxlZFBsYXlcbiAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgIGxhYmVsPXtcbiAgICAgICAgICAgICAgICB3aW5uaW5nXG4gICAgICAgICAgICAgICAgICA/IGAke25hbWVzX2J5X2lkW3BsYXllZC5pZF19ICghKWBcbiAgICAgICAgICAgICAgICAgIDogbmFtZXNfYnlfaWRbcGxheWVkLmlkXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17d2lubmluZyA/IFwid2lubmluZ1wiIDogXCJcIn1cbiAgICAgICAgICAgICAgY2FyZHM9e3BsYXllZC5jYXJkc31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSl9XG4gICAgICAgIHt0aGlzLnByb3BzLnRyaWNrLnBsYXllcl9xdWV1ZS5tYXAoKGlkLCBpZHgpID0+IHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPExhYmVsZWRQbGF5XG4gICAgICAgICAgICAgIGtleT17aWR4ICsgdGhpcy5wcm9wcy50cmljay5wbGF5ZWRfY2FyZHMubGVuZ3RofVxuICAgICAgICAgICAgICBsYWJlbD17bmFtZXNfYnlfaWRbaWRdfVxuICAgICAgICAgICAgICBjYXJkcz17YmxhbmtfY2FyZHN9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgSVBvaW50c1Byb3BzIHtcbiAgcGxheWVyczogSVBsYXllcltdO1xuICBwb2ludHM6IHsgW3BsYXllcl9pZDogbnVtYmVyXTogc3RyaW5nW10gfTtcbiAgbGFuZGxvcmRzX3RlYW06IG51bWJlcltdO1xufVxuY2xhc3MgUG9pbnRzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElQb2ludHNQcm9wcywge30+IHtcbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiBlKFxuICAgICAgXCJkaXZcIixcbiAgICAgIHsgY2xhc3NOYW1lOiBcInBvaW50c1wiIH0sXG4gICAgICB0aGlzLnByb3BzLnBsYXllcnMubWFwKChwbGF5ZXIpID0+IHtcbiAgICAgICAgbGV0IHRvdGFsX3BvaW50cyA9IDA7XG4gICAgICAgIHRoaXMucHJvcHMucG9pbnRzW3BsYXllci5pZF0uZm9yRWFjaCgoYykgPT4ge1xuICAgICAgICAgIHRvdGFsX3BvaW50cyArPSBDQVJEX0xVVFtjXS5wb2ludHM7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSB0aGlzLnByb3BzLmxhbmRsb3Jkc190ZWFtLmluY2x1ZGVzKHBsYXllci5pZClcbiAgICAgICAgICA/IFwibGFuZGxvcmRcIlxuICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgY29uc3QgY2FyZHMgPVxuICAgICAgICAgIHRoaXMucHJvcHMucG9pbnRzW3BsYXllci5pZF0ubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyB0aGlzLnByb3BzLnBvaW50c1twbGF5ZXIuaWRdXG4gICAgICAgICAgICA6IFtcIvCfgqBcIl07XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPExhYmVsZWRQbGF5XG4gICAgICAgICAgICBrZXk9e3BsYXllci5pZH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICAgICAgbGFiZWw9e2Ake3BsYXllci5uYW1lfTogJHt0b3RhbF9wb2ludHN95YiGYH1cbiAgICAgICAgICAgIGNhcmRzPXtjYXJkc31cbiAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgfSlcbiAgICApO1xuICB9XG59XG5cbmludGVyZmFjZSBJQ2FyZHNQcm9wcyB7XG4gIHNlbGVjdGVkOiBzdHJpbmdbXTtcbiAgY2FyZHM6IHN0cmluZ1tdO1xuICBzZXRTZWxlY3RlZChuZXdfc2VsZWN0ZWQ6IHN0cmluZ1tdKTogdm9pZDtcbn1cbmNsYXNzIENhcmRzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElDYXJkc1Byb3BzLCB7fT4ge1xuICBjb25zdHJ1Y3Rvcihwcm9wczogSUNhcmRzUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zZWxlY3RDYXJkID0gdGhpcy5zZWxlY3RDYXJkLmJpbmQodGhpcyk7XG4gICAgdGhpcy51bnNlbGVjdENhcmQgPSB0aGlzLnVuc2VsZWN0Q2FyZC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgc2VsZWN0Q2FyZChjYXJkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBuZXdfc2VsZWN0ZWQgPSBbLi4udGhpcy5wcm9wcy5zZWxlY3RlZF07XG4gICAgbmV3X3NlbGVjdGVkLnB1c2goY2FyZCk7XG4gICAgdGhpcy5wcm9wcy5zZXRTZWxlY3RlZChuZXdfc2VsZWN0ZWQpO1xuICB9XG5cbiAgdW5zZWxlY3RDYXJkKGNhcmQ6IHN0cmluZykge1xuICAgIGNvbnN0IHBvcyA9IHRoaXMucHJvcHMuc2VsZWN0ZWQuaW5kZXhPZihjYXJkKTtcbiAgICBpZiAocG9zID49IDApIHtcbiAgICAgIGNvbnN0IG5ld19zZWxlY3RlZCA9IFsuLi50aGlzLnByb3BzLnNlbGVjdGVkXTtcbiAgICAgIG5ld19zZWxlY3RlZC5zcGxpY2UocG9zLCAxKTtcbiAgICAgIHRoaXMucHJvcHMuc2V0U2VsZWN0ZWQobmV3X3NlbGVjdGVkKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgdW5zZWxlY3RlZCA9IFsuLi50aGlzLnByb3BzLmNhcmRzXTtcbiAgICB0aGlzLnByb3BzLnNlbGVjdGVkLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIHVuc2VsZWN0ZWQuc3BsaWNlKHVuc2VsZWN0ZWQuaW5kZXhPZihjYXJkKSwgMSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZShcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7IGNsYXNzTmFtZTogXCJoYW5kXCIgfSxcbiAgICAgIGUoXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHsgY2xhc3NOYW1lOiBcInNlbGVjdGVkLWNhcmRzXCIgfSxcbiAgICAgICAgdGhpcy5wcm9wcy5zZWxlY3RlZC5tYXAoKGMsIGlkeCkgPT5cbiAgICAgICAgICBlKENhcmQsIHsga2V5OiBpZHgsIG9uQ2xpY2s6ICgpID0+IHRoaXMudW5zZWxlY3RDYXJkKGMpLCBjYXJkOiBjIH0pXG4gICAgICAgICksXG4gICAgICAgIHRoaXMucHJvcHMuc2VsZWN0ZWQubGVuZ3RoID09IDAgPyBlKENhcmQsIHsgY2FyZDogXCLwn4KgXCIgfSkgOiBudWxsXG4gICAgICApLFxuICAgICAgZShcInBcIiwgbnVsbCwgXCJZb3VyIGhhbmRcIiksXG4gICAgICBlKFxuICAgICAgICBcImRpdlwiLFxuICAgICAgICB7IGNsYXNzTmFtZTogXCJ1bnNlbGVjdGVkLWNhcmRzXCIgfSxcbiAgICAgICAgdW5zZWxlY3RlZC5tYXAoKGMsIGlkeCkgPT5cbiAgICAgICAgICBlKENhcmQsIHsga2V5OiBpZHgsIG9uQ2xpY2s6ICgpID0+IHRoaXMuc2VsZWN0Q2FyZChjKSwgY2FyZDogYyB9KVxuICAgICAgICApLFxuICAgICAgICB1bnNlbGVjdGVkLmxlbmd0aCA9PSAwID8gZShDYXJkLCB7IGNhcmQ6IFwi8J+CoFwiIH0pIDogbnVsbFxuICAgICAgKVxuICAgICk7XG4gIH1cbn1cblxuaW50ZXJmYWNlIElDYXJkUHJvcHMge1xuICBjYXJkOiBzdHJpbmc7XG4gIG9uQ2xpY2s/KGV2dDogYW55KTogYW55O1xufVxuY2xhc3MgQ2FyZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJQ2FyZFByb3BzLCB7fT4ge1xuICByZW5kZXIoKSB7XG4gICAgY29uc3QgYyA9IENBUkRfTFVUW3RoaXMucHJvcHMuY2FyZF07XG4gICAgaWYgKCFjKSB7XG4gICAgICByZXR1cm4gZShcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiY2FyZCB1bmtub3duXCIgfSwgdGhpcy5wcm9wcy5jYXJkKTtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9wczogeyBvbkNsaWNrPyhldnQ6IGFueSk6IGFueTsgY2xhc3NOYW1lOiBzdHJpbmcgfSA9IHtcbiAgICAgIGNsYXNzTmFtZTogYGNhcmQgJHtjLnR5cH1gLFxuICAgIH07XG4gICAgaWYgKHRoaXMucHJvcHMub25DbGljaykge1xuICAgICAgcHJvcHMub25DbGljayA9IHRoaXMucHJvcHMub25DbGljaztcbiAgICB9XG4gICAgcmV0dXJuIGUoXCJzcGFuXCIsIHByb3BzLCBjLmRpc3BsYXlfdmFsdWUpO1xuICB9XG59XG5cbmludGVyZmFjZSBJTGFiZWxlZFBsYXlQcm9wcyB7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgY2FyZHM6IHN0cmluZ1tdO1xuICBsYWJlbDogc3RyaW5nO1xufVxuY2xhc3MgTGFiZWxlZFBsYXkgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SUxhYmVsZWRQbGF5UHJvcHMsIHt9PiB7XG4gIHJlbmRlcigpIHtcbiAgICBsZXQgY2xhc3NOYW1lID0gXCJsYWJlbGVkLXBsYXlcIjtcbiAgICBpZiAodGhpcy5wcm9wcy5jbGFzc05hbWUpIHtcbiAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSArIFwiIFwiICsgdGhpcy5wcm9wcy5jbGFzc05hbWU7XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwbGF5XCI+XG4gICAgICAgICAge3RoaXMucHJvcHMuY2FyZHMubWFwKChjYXJkLCBpZHgpID0+IChcbiAgICAgICAgICAgIDxDYXJkIGNhcmQ9e2NhcmR9IGtleT17aWR4fSAvPlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsYWJlbFwiPnRoaXMucHJvcHMubGFiZWw8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuaW50ZXJmYWNlIElKb2luUm9vbVByb3BzIHtcbiAgbmFtZTogc3RyaW5nO1xuICByb29tX25hbWU6IHN0cmluZztcbiAgc2V0TmFtZShuYW1lOiBzdHJpbmcpOiB2b2lkO1xufVxuY2xhc3MgSm9pblJvb20gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SUpvaW5Sb29tUHJvcHMsIHt9PiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBJSm9pblJvb21Qcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLmhhbmRsZUNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVTdWJtaXQgPSB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgaGFuZGxlQ2hhbmdlKGV2ZW50OiBhbnkpIHtcbiAgICB0aGlzLnByb3BzLnNldE5hbWUoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgfVxuXG4gIGhhbmRsZVN1Ym1pdChldmVudDogYW55KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAodGhpcy5wcm9wcy5uYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgIHNlbmQoe1xuICAgICAgICByb29tX25hbWU6IHRoaXMucHJvcHMucm9vbV9uYW1lLFxuICAgICAgICBuYW1lOiB0aGlzLnByb3BzLm5hbWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPXtcInRleHRcIn1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtcIm5hbWVcIn1cbiAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLm5hbWV9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICBhdXRvRm9jdXM9e3RydWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiam9pblwiIC8+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuY2xhc3MgVHJ1bXAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8eyB0cnVtcDogSVRydW1wIH0sIHt9PiB7XG4gIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5wcm9wcy50cnVtcC5TdGFuZGFyZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0cnVtcFwiPlxuICAgICAgICAgIFRoZSB0cnVtcCBzdWl0IGlze1wiIFwifVxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17dGhpcy5wcm9wcy50cnVtcC5TdGFuZGFyZC5zdWl0fT5cbiAgICAgICAgICAgIHt0aGlzLnByb3BzLnRydW1wLlN0YW5kYXJkLnN1aXR9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICwgcmFuayB7dGhpcy5wcm9wcy50cnVtcC5TdGFuZGFyZC5udW1iZXJ9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudHJ1bXAuTm9UcnVtcCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0cnVtcFwiPlxuICAgICAgICAgIE5vIHRydW1wLCByYW5rIHt0aGlzLnByb3BzLnRydW1wLk5vVHJ1bXAubnVtYmVyfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufVxuXG5pbnRlcmZhY2UgSUtpY2tlclByb3BzIHtcbiAgcGxheWVyczogSVBsYXllcltdO1xufVxuY2xhc3MgS2lja2VyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElLaWNrZXJQcm9wcywgeyB0b19raWNrOiBzdHJpbmcgfT4ge1xuICBjb25zdHJ1Y3Rvcihwcm9wczogSUtpY2tlclByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB0b19raWNrOiBcIlwiLFxuICAgIH07XG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLmtpY2sgPSB0aGlzLmtpY2suYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9uQ2hhbmdlKGV2dDogYW55KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHRvX2tpY2s6IGV2dC50YXJnZXQudmFsdWUgfSk7XG4gIH1cbiAga2ljayhldnQ6IGFueSkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNlbmQoeyBLaWNrOiBwYXJzZUludCh0aGlzLnN0YXRlLnRvX2tpY2ssIDEwKSB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gZShcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7IGNsYXNzTmFtZTogXCJraWNrZXJcIiB9LFxuICAgICAgZShcbiAgICAgICAgXCJzZWxlY3RcIixcbiAgICAgICAgeyB2YWx1ZTogdGhpcy5zdGF0ZS50b19raWNrLCBvbkNoYW5nZTogdGhpcy5vbkNoYW5nZSB9LFxuICAgICAgICBlKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIgfSwgXCJcIiksXG4gICAgICAgIHRoaXMucHJvcHMucGxheWVycy5tYXAoKHBsYXllcikgPT5cbiAgICAgICAgICBlKFwib3B0aW9uXCIsIHsgdmFsdWU6IHBsYXllci5pZCwga2V5OiBwbGF5ZXIuaWQgfSwgcGxheWVyLm5hbWUpXG4gICAgICAgIClcbiAgICAgICksXG4gICAgICBlKFxuICAgICAgICBcImJ1dHRvblwiLFxuICAgICAgICB7IG9uQ2xpY2s6IHRoaXMua2ljaywgZGlzYWJsZWQ6IHRoaXMuc3RhdGUudG9fa2ljayA9PSBcIlwiIH0sXG4gICAgICAgIFwia2lja1wiXG4gICAgICApXG4gICAgKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgSUxhbmRsb3JkU2VsZWN0b3JQcm9wcyB7XG4gIGxhbmRsb3JkOiBudW1iZXIgfCBudWxsO1xuICBwbGF5ZXJzOiBJUGxheWVyW107XG59XG5jbGFzcyBMYW5kbG9yZFNlbGVjdG9yIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElMYW5kbG9yZFNlbGVjdG9yUHJvcHMsIHt9PiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBJTGFuZGxvcmRTZWxlY3RvclByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvbkNoYW5nZShldnQ6IGFueSkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgaWYgKGV2dC50YXJnZXQudmFsdWUgIT0gXCJcIikge1xuICAgICAgc2VuZCh7IEFjdGlvbjogeyBTZXRMYW5kbG9yZDogcGFyc2VJbnQoZXZ0LnRhcmdldC52YWx1ZSwgMTApIH0gfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbmQoeyBBY3Rpb246IHsgU2V0TGFuZGxvcmQ6IG51bGwgfSB9KTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIGUoXG4gICAgICBcImRpdlwiLFxuICAgICAgeyBjbGFzc05hbWU6IFwibGFuZGxvcmQtcGlja2VyXCIgfSxcbiAgICAgIGUoXG4gICAgICAgIFwibGFiZWxcIixcbiAgICAgICAgbnVsbCxcbiAgICAgICAgXCJsZWFkZXI6IFwiLFxuICAgICAgICBlKFxuICAgICAgICAgIFwic2VsZWN0XCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMubGFuZGxvcmQgIT0gbnVsbCA/IHRoaXMucHJvcHMubGFuZGxvcmQgOiBcIlwiLFxuICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMub25DaGFuZ2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIgfSwgXCJ3aW5uZXIgb2YgdGhlIGJpZFwiKSxcbiAgICAgICAgICB0aGlzLnByb3BzLnBsYXllcnMubWFwKChwbGF5ZXIpID0+XG4gICAgICAgICAgICBlKFwib3B0aW9uXCIsIHsgdmFsdWU6IHBsYXllci5pZCwga2V5OiBwbGF5ZXIuaWQgfSwgcGxheWVyLm5hbWUpXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgSU51bURlY2tzU2VsZWN0b3JQcm9wcyB7XG4gIG51bV9kZWNrczogbnVtYmVyIHwgbnVsbDtcbiAgcGxheWVyczogSVBsYXllcltdO1xufVxuY2xhc3MgTnVtRGVja3NTZWxlY3RvciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJTnVtRGVja3NTZWxlY3RvclByb3BzLCB7fT4ge1xuICBjb25zdHJ1Y3Rvcihwcm9wczogSU51bURlY2tzU2VsZWN0b3JQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb25DaGFuZ2UoZXZ0OiBhbnkpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmIChldnQudGFyZ2V0LnZhbHVlICE9IFwiXCIpIHtcbiAgICAgIHNlbmQoeyBBY3Rpb246IHsgU2V0TnVtRGVja3M6IHBhcnNlSW50KGV2dC50YXJnZXQudmFsdWUsIDEwKSB9IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZW5kKHsgQWN0aW9uOiB7IFNldE51bURlY2tzOiBudWxsIH0gfSk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm51bS1kZWNrcy1waWNrZXJcIj5cbiAgICAgICAgPGxhYmVsPlxuICAgICAgICAgIG51bWJlciBvZiBkZWNrczp7XCIgXCJ9XG4gICAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMubnVtX2RlY2tzICE9IG51bGwgPyB0aGlzLnByb3BzLm51bV9kZWNrcyA6IFwiXCJ9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+ZGVmYXVsdDwvb3B0aW9uPlxuICAgICAgICAgICAge0FycmF5KHRoaXMucHJvcHMucGxheWVycy5sZW5ndGgpXG4gICAgICAgICAgICAgIC5maWxsKDApXG4gICAgICAgICAgICAgIC5tYXAoKF8sIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGlkeCArIDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9e3ZhbH0ga2V5PXtpZHh9PlxuICAgICAgICAgICAgICAgICAgICB7dmFsfVxuICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgIDwvbGFiZWw+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbmludGVyZmFjZSBJUmFua1NlbGVjdG9yUHJvcHMge1xuICBudW1fZGVja3M6IG51bWJlciB8IG51bGw7XG4gIHBsYXllcnM6IElQbGF5ZXJbXTtcbiAgbmFtZTogc3RyaW5nO1xufVxuY2xhc3MgUmFua1NlbGVjdG9yIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElSYW5rU2VsZWN0b3JQcm9wcywge30+IHtcbiAgY29uc3RydWN0b3IocHJvcHM6IElSYW5rU2VsZWN0b3JQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb25DaGFuZ2UoZXZ0OiBhbnkpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmIChldnQudGFyZ2V0LnZhbHVlICE9IFwiXCIpIHtcbiAgICAgIHNlbmQoeyBBY3Rpb246IHsgU2V0UmFuazogZXZ0LnRhcmdldC52YWx1ZSB9IH0pO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQgcmFuayA9IFwiXCI7XG4gICAgdGhpcy5wcm9wcy5wbGF5ZXJzLmZvckVhY2goKHApID0+IHtcbiAgICAgIGlmIChwLm5hbWUgPT0gdGhpcy5wcm9wcy5uYW1lKSB7XG4gICAgICAgIHJhbmsgPSBwLmxldmVsO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImxhbmRsb3JkLXBpY2tlclwiPlxuICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgcmFuazp7XCIgXCJ9XG4gICAgICAgICAgPHNlbGVjdCB2YWx1ZT17cmFua30gb25DaGFuZ2U9e3RoaXMub25DaGFuZ2V9PlxuICAgICAgICAgICAge1tcbiAgICAgICAgICAgICAgXCIyXCIsXG4gICAgICAgICAgICAgIFwiM1wiLFxuICAgICAgICAgICAgICBcIjRcIixcbiAgICAgICAgICAgICAgXCI1XCIsXG4gICAgICAgICAgICAgIFwiNlwiLFxuICAgICAgICAgICAgICBcIjdcIixcbiAgICAgICAgICAgICAgXCI4XCIsXG4gICAgICAgICAgICAgIFwiOVwiLFxuICAgICAgICAgICAgICBcIjEwXCIsXG4gICAgICAgICAgICAgIFwiSlwiLFxuICAgICAgICAgICAgICBcIktcIixcbiAgICAgICAgICAgICAgXCJRXCIsXG4gICAgICAgICAgICAgIFwiQVwiLFxuICAgICAgICAgICAgXS5tYXAoKHJhbmspID0+IChcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT17cmFua30ga2V5PXtyYW5rfT5cbiAgICAgICAgICAgICAgICB7cmFua31cbiAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgPC9sYWJlbD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuaW50ZXJmYWNlIElQbGF5ZXJzUHJvcHMge1xuICBwbGF5ZXJzOiBJUGxheWVyW107XG4gIGxhbmRsb3JkPzogbnVtYmVyIHwgbnVsbDtcbiAgbGFuZGxvcmRzX3RlYW0/OiBudW1iZXJbXTtcbiAgbW92YWJsZT86IGJvb2xlYW47XG4gIG5leHQ/OiBudW1iZXIgfCBudWxsO1xuICBuYW1lOiBzdHJpbmc7XG59XG5jbGFzcyBQbGF5ZXJzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElQbGF5ZXJzUHJvcHMsIHt9PiB7XG4gIG1vdmVQbGF5ZXJMZWZ0KGV2dDogYW55LCBwbGF5ZXJfaWQ6IG51bWJlcikge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHBsYXllcl9pZHMgPSB0aGlzLnByb3BzLnBsYXllcnMubWFwKChwKSA9PiBwLmlkKTtcbiAgICBjb25zdCBpbmRleCA9IHBsYXllcl9pZHMuaW5kZXhPZihwbGF5ZXJfaWQpO1xuICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgIGNvbnN0IHAgPSBwbGF5ZXJfaWRzW2luZGV4XTtcbiAgICAgIHBsYXllcl9pZHNbaW5kZXhdID0gcGxheWVyX2lkc1tpbmRleCAtIDFdO1xuICAgICAgcGxheWVyX2lkc1tpbmRleCAtIDFdID0gcDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcCA9IHBsYXllcl9pZHNbaW5kZXhdO1xuICAgICAgcGxheWVyX2lkc1tpbmRleF0gPSBwbGF5ZXJfaWRzW3BsYXllcl9pZHMubGVuZ3RoIC0gMV07XG4gICAgICBwbGF5ZXJfaWRzW3BsYXllcl9pZHMubGVuZ3RoIC0gMV0gPSBwO1xuICAgIH1cbiAgICBzZW5kKHsgQWN0aW9uOiB7IFJlb3JkZXJQbGF5ZXJzOiBwbGF5ZXJfaWRzIH0gfSk7XG4gIH1cblxuICBtb3ZlUGxheWVyUmlnaHQoZXZ0OiBhbnksIHBsYXllcl9pZDogbnVtYmVyKSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgcGxheWVyX2lkcyA9IHRoaXMucHJvcHMucGxheWVycy5tYXAoKHApID0+IHAuaWQpO1xuICAgIGNvbnN0IGluZGV4ID0gcGxheWVyX2lkcy5pbmRleE9mKHBsYXllcl9pZCk7XG4gICAgaWYgKGluZGV4IDwgcGxheWVyX2lkcy5sZW5ndGggLSAxKSB7XG4gICAgICBjb25zdCBwID0gcGxheWVyX2lkc1tpbmRleF07XG4gICAgICBwbGF5ZXJfaWRzW2luZGV4XSA9IHBsYXllcl9pZHNbaW5kZXggKyAxXTtcbiAgICAgIHBsYXllcl9pZHNbaW5kZXggKyAxXSA9IHA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHAgPSBwbGF5ZXJfaWRzW2luZGV4XTtcbiAgICAgIHBsYXllcl9pZHNbaW5kZXhdID0gcGxheWVyX2lkc1swXTtcbiAgICAgIHBsYXllcl9pZHNbMF0gPSBwO1xuICAgIH1cbiAgICBzZW5kKHsgQWN0aW9uOiB7IFJlb3JkZXJQbGF5ZXJzOiBwbGF5ZXJfaWRzIH0gfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIGUoXG4gICAgICBcInRhYmxlXCIsXG4gICAgICB7IGNsYXNzTmFtZTogXCJwbGF5ZXJzXCIgfSxcbiAgICAgIGUoXG4gICAgICAgIFwidGJvZHlcIixcbiAgICAgICAgbnVsbCxcbiAgICAgICAgZShcbiAgICAgICAgICBcInRyXCIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICB0aGlzLnByb3BzLnBsYXllcnMubWFwKChwbGF5ZXIpID0+IHtcbiAgICAgICAgICAgIGxldCBjbGFzc05hbWUgPSBcInBsYXllclwiO1xuICAgICAgICAgICAgbGV0IGRlc2NyaXB0b3IgPSBgJHtwbGF5ZXIubmFtZX0gKHJhbmsgJHtwbGF5ZXIubGV2ZWx9KWA7XG5cbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaWQgPT0gdGhpcy5wcm9wcy5sYW5kbG9yZCkge1xuICAgICAgICAgICAgICBkZXNjcmlwdG9yID0gZGVzY3JpcHRvciArIFwiICjlvZPluoQpXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGxheWVyLm5hbWUgPT0gdGhpcy5wcm9wcy5uYW1lKSB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yICsgXCIgKFlvdSEpXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHBsYXllci5pZCA9PSB0aGlzLnByb3BzLmxhbmRsb3JkIHx8XG4gICAgICAgICAgICAgICh0aGlzLnByb3BzLmxhbmRsb3Jkc190ZWFtICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5sYW5kbG9yZHNfdGVhbS5pbmNsdWRlcyhwbGF5ZXIuaWQpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSArIFwiIGxhbmRsb3JkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGxheWVyLmlkID09IHRoaXMucHJvcHMubmV4dCkge1xuICAgICAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUgKyBcIiBuZXh0XCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBlKFxuICAgICAgICAgICAgICBcInRkXCIsXG4gICAgICAgICAgICAgIHsga2V5OiBwbGF5ZXIuaWQsIGNsYXNzTmFtZTogY2xhc3NOYW1lIH0sXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMubW92YWJsZVxuICAgICAgICAgICAgICAgID8gZShcbiAgICAgICAgICAgICAgICAgICAgXCJidXR0b25cIixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IChldnQ6IGFueSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZVBsYXllckxlZnQoZXZ0LCBwbGF5ZXIuaWQpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcIjxcIlxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRvcixcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tb3ZhYmxlXG4gICAgICAgICAgICAgICAgPyBlKFxuICAgICAgICAgICAgICAgICAgICBcImJ1dHRvblwiLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljazogKGV2dDogYW55KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlUGxheWVyUmlnaHQoZXZ0LCBwbGF5ZXIuaWQpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcIj5cIlxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgSUNoYXRQcm9wcyB7XG4gIG1lc3NhZ2VzOiB7IGZyb206IHN0cmluZzsgbWVzc2FnZTogc3RyaW5nOyBmcm9tX2dhbWU/OiBib29sZWFuIH1bXTtcbn1cbmludGVyZmFjZSBJQ2hhdFN0YXRlIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xufVxuY2xhc3MgQ2hhdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJQ2hhdFByb3BzLCBJQ2hhdFN0YXRlPiB7XG4gIHByaXZhdGUgYW5jaG9yID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxEaXZFbGVtZW50PigpO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBJQ2hhdFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7IG1lc3NhZ2U6IFwiXCIgfTtcbiAgICB0aGlzLmhhbmRsZUNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVTdWJtaXQgPSB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgaWYgKHRoaXMuYW5jaG9yLmN1cnJlbnQpIHtcbiAgICAgIHRoaXMuYW5jaG9yLmN1cnJlbnQuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogXCJuZWFyZXN0XCIsIGlubGluZTogXCJzdGFydFwiIH0pO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICBpZiAodGhpcy5hbmNob3IuY3VycmVudCkge1xuICAgICAgdGhpcy5hbmNob3IuY3VycmVudC5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiBcIm5lYXJlc3RcIiwgaW5saW5lOiBcInN0YXJ0XCIgfSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ2hhbmdlKGV2ZW50OiBhbnkpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgbWVzc2FnZTogZXZlbnQudGFyZ2V0LnZhbHVlIH0pO1xuICB9XG5cbiAgaGFuZGxlU3VibWl0KGV2ZW50OiBhbnkpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICh0aGlzLnN0YXRlLm1lc3NhZ2UubGVuZ3RoID4gMCkge1xuICAgICAgc2VuZCh7XG4gICAgICAgIE1lc3NhZ2U6IHRoaXMuc3RhdGUubWVzc2FnZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHsgbWVzc2FnZTogXCJcIiB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaGF0XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWVzc2FnZXNcIj5cbiAgICAgICAgICB7dGhpcy5wcm9wcy5tZXNzYWdlcy5tYXAoKG0sIGlkeCkgPT4ge1xuICAgICAgICAgICAgbGV0IGNsYXNzTmFtZSA9IFwibWVzc2FnZVwiO1xuICAgICAgICAgICAgaWYgKG0uZnJvbV9nYW1lKSB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSArIFwiIGdhbWUtbWVzc2FnZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPHAga2V5PXtpZHh9IGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAgICAgICAgICB7bS5mcm9tfToge20ubWVzc2FnZX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoYXQtYW5jaG9yXCIgcmVmPXt0aGlzLmFuY2hvcn0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cInR5cGUgbWVzc2FnZSBoZXJlXCJcbiAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm1lc3NhZ2V9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwic3VibWl0XCIgLz5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5jbGFzcyBHYW1lTW9kZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDx7IGdhbWVfbW9kZTogSUdhbWVNb2RlIH0sIHt9PiB7XG4gIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5nYW1lX21vZGUgPT0gXCJUcmFjdG9yXCIpIHtcbiAgICAgIHJldHVybiA8aDE+5Y2H57qnIC8gVHJhY3RvcjwvaDE+O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gPGgxPuaJvuaci+WPiyAvIEZpbmRpbmcgRnJpZW5kczwvaDE+O1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBGcmllbmRzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PHsgZ2FtZV9tb2RlOiBJR2FtZU1vZGUgfSwge30+IHtcbiAgcmVuZGVyKCkge1xuICAgIGlmICh0aGlzLnByb3BzLmdhbWVfbW9kZSAhPSBcIlRyYWN0b3JcIikge1xuICAgICAgcmV0dXJuIGUoXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHsgY2xhc3NOYW1lOiBcInBlbmRpbmctZnJpZW5kc1wiIH0sXG4gICAgICAgIHRoaXMucHJvcHMuZ2FtZV9tb2RlLkZpbmRpbmdGcmllbmRzLmZyaWVuZHMubWFwKChmcmllbmQsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChmcmllbmQucGxheWVyX2lkICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGMgPSBDQVJEX0xVVFtmcmllbmQuY2FyZF07XG4gICAgICAgICAgaWYgKCFjKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgY2FyZCA9IGAke2MubnVtYmVyfSR7Yy50eXB9YDtcbiAgICAgICAgICBpZiAoZnJpZW5kLnNraXAgPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGUoXG4gICAgICAgICAgICAgIFwicFwiLFxuICAgICAgICAgICAgICB7IGtleTogaWR4IH0sXG4gICAgICAgICAgICAgIFwiVGhlIG5leHQgcGVyc29uIHRvIHBsYXkgXCIsXG4gICAgICAgICAgICAgIGUoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBjLnR5cCB9LCBgJHtjLm51bWJlcn0ke2MudHlwfWApLFxuICAgICAgICAgICAgICBcIiBpcyBhIGZyaWVuZFwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZShcbiAgICAgICAgICAgICAgXCJwXCIsXG4gICAgICAgICAgICAgIHsga2V5OiBpZHggfSxcbiAgICAgICAgICAgICAgYCR7ZnJpZW5kLnNraXB9IGAsXG4gICAgICAgICAgICAgIGUoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBjLnR5cCB9LCBgJHtjLm51bWJlcn0ke2MudHlwfWApLFxuICAgICAgICAgICAgICBcIiBjYW4gYmUgcGxheWVkIGJlZm9yZSB0aGUgbmV4dCBwZXJzb24gdG8gcGxheSBcIixcbiAgICAgICAgICAgICAgZShcInNwYW5cIiwgeyBjbGFzc05hbWU6IGMudHlwIH0sIGAke2MubnVtYmVyfSR7Yy50eXB9YCksXG4gICAgICAgICAgICAgIFwiIGlzIGEgZnJpZW5kXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG5cbmludGVyZmFjZSBJRnJpZW5kU2VsZWN0UHJvcHMge1xuICBmcmllbmQ6IElGcmllbmQ7XG4gIHRydW1wOiBJVHJ1bXA7XG4gIG51bV9kZWNrczogbnVtYmVyO1xuICBvbkNoYW5nZShpbnB1dDogYW55KTogYW55O1xufVxuY2xhc3MgRnJpZW5kU2VsZWN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElGcmllbmRTZWxlY3RQcm9wcywge30+IHtcbiAgY29uc3RydWN0b3IocHJvcHM6IElGcmllbmRTZWxlY3RQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLm9uQ2FyZENoYW5nZSA9IHRoaXMub25DYXJkQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbk9yZGluYWxDaGFuZ2UgPSB0aGlzLm9uT3JkaW5hbENoYW5nZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb25DYXJkQ2hhbmdlKGV2dDogYW55KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh7XG4gICAgICBjYXJkOiBldnQudGFyZ2V0LnZhbHVlLFxuICAgICAgc2tpcDogdGhpcy5wcm9wcy5mcmllbmQuc2tpcCxcbiAgICB9KTtcbiAgfVxuICBvbk9yZGluYWxDaGFuZ2UoZXZ0OiBhbnkpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgIGNhcmQ6IHRoaXMucHJvcHMuZnJpZW5kLmNhcmQsXG4gICAgICBza2lwOiBwYXJzZUludChldnQudGFyZ2V0LnZhbHVlLCAxMCksXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgbnVtYmVyID0gdGhpcy5wcm9wcy50cnVtcC5TdGFuZGFyZFxuICAgICAgPyB0aGlzLnByb3BzLnRydW1wLlN0YW5kYXJkLm51bWJlclxuICAgICAgOiB0aGlzLnByb3BzLnRydW1wLk5vVHJ1bXA/Lm51bWJlcjtcbiAgICByZXR1cm4gZShcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7IGNsYXNzTmFtZTogXCJmcmllbmQtc2VsZWN0XCIgfSxcbiAgICAgIGUoXG4gICAgICAgIFwic2VsZWN0XCIsXG4gICAgICAgIHsgdmFsdWU6IHRoaXMucHJvcHMuZnJpZW5kLmNhcmQsIG9uQ2hhbmdlOiB0aGlzLm9uQ2FyZENoYW5nZSB9LFxuICAgICAgICBlKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIgfSwgXCIgXCIpLFxuICAgICAgICBDQVJEUy5tYXAoKGMpID0+IHtcbiAgICAgICAgICByZXR1cm4gYy5udW1iZXIgIT0gbnVsbCAmJiBjLm51bWJlciAhPSBudW1iZXJcbiAgICAgICAgICAgID8gZShcbiAgICAgICAgICAgICAgICBcIm9wdGlvblwiLFxuICAgICAgICAgICAgICAgIHsga2V5OiBjLnZhbHVlLCB2YWx1ZTogYy52YWx1ZSB9LFxuICAgICAgICAgICAgICAgIGAke2MubnVtYmVyfSR7Yy50eXB9YFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIH0pXG4gICAgICApLFxuICAgICAgZShcbiAgICAgICAgXCJzZWxlY3RcIixcbiAgICAgICAgeyB2YWx1ZTogdGhpcy5wcm9wcy5mcmllbmQuc2tpcCwgb25DaGFuZ2U6IHRoaXMub25PcmRpbmFsQ2hhbmdlIH0sXG4gICAgICAgIEFycmF5KHRoaXMucHJvcHMubnVtX2RlY2tzKVxuICAgICAgICAgIC5maWxsKDEpXG4gICAgICAgICAgLm1hcCgoXywgaWR4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZShcIm9wdGlvblwiLCB7IGtleTogaWR4LCB2YWx1ZTogaWR4IH0sIGlkeCArIDEpO1xuICAgICAgICAgIH0pXG4gICAgICApXG4gICAgKTtcbiAgfVxufVxuXG5jbGFzcyBFcnJvcnMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8eyBlcnJvcnM6IHN0cmluZ1tdIH0sIHt9PiB7XG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gZShcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7IGNsYXNzTmFtZTogXCJlcnJvcnNcIiB9LFxuICAgICAgdGhpcy5wcm9wcy5lcnJvcnMubWFwKChlcnIsIGlkeCkgPT5cbiAgICAgICAgZShcInBcIiwgeyBrZXk6IGlkeCB9LCBlKFwiY29kZVwiLCBudWxsLCBlcnIpKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn1cblxuaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoLmxlbmd0aCAhPSAxNykge1xuICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoOCk7XG4gIHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycik7XG4gIGNvbnN0IHIgPSBBcnJheS5mcm9tKGFyciwgKGQpID0+IChcIjBcIiArIGQudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTIpKS5qb2luKFwiXCIpO1xuICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHI7XG59XG5cbmNvbnN0IHVyaSA9XG4gIChsb2NhdGlvbi5wcm90b2NvbCA9PSBcImh0dHBzOlwiID8gXCJ3c3M6Ly9cIiA6IFwid3M6Ly9cIikgK1xuICBsb2NhdGlvbi5ob3N0ICtcbiAgbG9jYXRpb24ucGF0aG5hbWUgK1xuICAobG9jYXRpb24ucGF0aG5hbWUuZW5kc1dpdGgoXCIvXCIpID8gXCJhcGlcIiA6IFwiL2FwaVwiKTtcbmNvbnN0IHdzID0gbmV3IFdlYlNvY2tldCh1cmkpO1xuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBjb25uZWN0ZWQ6IGJvb2xlYW47XG4gIHJvb21fbmFtZTogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGdhbWVfc3RhdGU6IElHYW1lU3RhdGUgfCBudWxsO1xuICBmb3VyX2NvbG9yOiBib29sZWFuO1xuICBiZWVwX29uX3R1cm46IGJvb2xlYW47XG4gIHNob3dfbGFzdF90cmljazogYm9vbGVhbjtcbiAgY2FyZHM6IHN0cmluZ1tdO1xuICBlcnJvcnM6IHN0cmluZ1tdO1xuICBtZXNzYWdlczogeyBmcm9tOiBzdHJpbmc7IG1lc3NhZ2U6IHN0cmluZzsgZnJvbV9nYW1lOiBib29sZWFuIH1bXTtcbn1cblxubGV0IHN0YXRlOiBTdGF0ZSA9IHtcbiAgY29ubmVjdGVkOiBmYWxzZSxcbiAgcm9vbV9uYW1lOiB3aW5kb3cubG9jYXRpb24uaGFzaC5zbGljZSgxKSxcbiAgbmFtZTogd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibmFtZVwiKSB8fCBcIlwiLFxuICBnYW1lX3N0YXRlOiBudWxsLFxuICBmb3VyX2NvbG9yOiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJmb3VyX2NvbG9yXCIpID09IFwib25cIiB8fCBmYWxzZSxcbiAgYmVlcF9vbl90dXJuOiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJiZWVwX29uX3R1cm5cIikgPT0gXCJvblwiIHx8IGZhbHNlLFxuICBzaG93X2xhc3RfdHJpY2s6XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2hvd19sYXN0X3RyaWNrXCIpID09IFwib25cIiB8fCBmYWxzZSxcbiAgY2FyZHM6IFtdLFxuICBlcnJvcnM6IFtdLFxuICBtZXNzYWdlczogW10sXG59O1xuXG5mdW5jdGlvbiBzZW5kKHZhbHVlOiBhbnkpIHtcbiAgd3Muc2VuZChKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJVSSgpIHtcbiAgaWYgKHN0YXRlLmNvbm5lY3RlZCkge1xuICAgIGlmIChzdGF0ZS5nYW1lX3N0YXRlID09IG51bGwpIHtcbiAgICAgIFJlYWN0RE9NLnJlbmRlcihcbiAgICAgICAgZShcbiAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgZShcImgyXCIsIG51bGwsIGBSb29tIE5hbWU6ICR7c3RhdGUucm9vbV9uYW1lfWApLFxuICAgICAgICAgIGUoRXJyb3JzLCB7IGVycm9yczogc3RhdGUuZXJyb3JzIH0pLFxuICAgICAgICAgIGUoSm9pblJvb20sIHtcbiAgICAgICAgICAgIG5hbWU6IHN0YXRlLm5hbWUsXG4gICAgICAgICAgICByb29tX25hbWU6IHN0YXRlLnJvb21fbmFtZSxcbiAgICAgICAgICAgIHNldE5hbWU6IChuYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUubmFtZSA9IG5hbWU7XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm5hbWVcIiwgbmFtZSk7XG4gICAgICAgICAgICAgIHJlbmRlclVJKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgICksXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicm9vdFwiKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgUmVhY3RET00ucmVuZGVyKFxuICAgICAgICBlKFxuICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgeyBjbGFzc05hbWU6IHN0YXRlLmZvdXJfY29sb3IgPyBcImZvdXItY29sb3JcIiA6IFwiXCIgfSxcbiAgICAgICAgICBlKEVycm9ycywgeyBlcnJvcnM6IHN0YXRlLmVycm9ycyB9KSxcbiAgICAgICAgICBlKFxuICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcImdhbWVcIiB9LFxuICAgICAgICAgICAgc3RhdGUuZ2FtZV9zdGF0ZS5Jbml0aWFsaXplXG4gICAgICAgICAgICAgID8gZShJbml0aWFsaXplLCB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZTogc3RhdGUuZ2FtZV9zdGF0ZS5Jbml0aWFsaXplLFxuICAgICAgICAgICAgICAgICAgY2FyZHM6IHN0YXRlLmNhcmRzLFxuICAgICAgICAgICAgICAgICAgbmFtZTogc3RhdGUubmFtZSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICBzdGF0ZS5nYW1lX3N0YXRlLkRyYXdcbiAgICAgICAgICAgICAgPyBlKERyYXcsIHtcbiAgICAgICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZS5nYW1lX3N0YXRlLkRyYXcsXG4gICAgICAgICAgICAgICAgICBjYXJkczogc3RhdGUuY2FyZHMsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBzdGF0ZS5uYW1lLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIHN0YXRlLmdhbWVfc3RhdGUuRXhjaGFuZ2VcbiAgICAgICAgICAgICAgPyBlKEV4Y2hhbmdlLCB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZTogc3RhdGUuZ2FtZV9zdGF0ZS5FeGNoYW5nZSxcbiAgICAgICAgICAgICAgICAgIGNhcmRzOiBzdGF0ZS5jYXJkcyxcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHN0YXRlLm5hbWUsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgc3RhdGUuZ2FtZV9zdGF0ZS5QbGF5XG4gICAgICAgICAgICAgID8gZShQbGF5LCB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZTogc3RhdGUuZ2FtZV9zdGF0ZS5QbGF5LFxuICAgICAgICAgICAgICAgICAgY2FyZHM6IHN0YXRlLmNhcmRzLFxuICAgICAgICAgICAgICAgICAgbmFtZTogc3RhdGUubmFtZSxcbiAgICAgICAgICAgICAgICAgIHNob3dfbGFzdF90cmljazogc3RhdGUuc2hvd19sYXN0X3RyaWNrLFxuICAgICAgICAgICAgICAgICAgYmVlcF9vbl90dXJuOiBzdGF0ZS5iZWVwX29uX3R1cm4sXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgc3RhdGUuZ2FtZV9zdGF0ZS5Eb25lID8gZShcInBcIiwgbnVsbCwgXCJHYW1lIG92ZXJcIikgOiBudWxsXG4gICAgICAgICAgKSxcbiAgICAgICAgICBlKENoYXQsIHsgbWVzc2FnZXM6IHN0YXRlLm1lc3NhZ2VzIH0pLFxuICAgICAgICAgIGUoXCJoclwiLCBudWxsKSxcbiAgICAgICAgICBlKFxuICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcInNldHRpbmdzXCIgfSxcbiAgICAgICAgICAgIGUoXG4gICAgICAgICAgICAgIFwibGFiZWxcIixcbiAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgXCJmb3VyLWNvbG9yIG1vZGVcIixcbiAgICAgICAgICAgICAgZShcImlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImZvdXItY29sb3JcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgICAgICAgICAgICAgY2hlY2tlZDogc3RhdGUuZm91cl9jb2xvcixcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGV2dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc3RhdGUuZm91cl9jb2xvciA9IGV2dC50YXJnZXQuY2hlY2tlZDtcbiAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5mb3VyX2NvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImZvdXJfY29sb3JcIiwgXCJvblwiKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImZvdXJfY29sb3JcIiwgXCJvZmZcIik7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICByZW5kZXJVSSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgZShcbiAgICAgICAgICAgICAgXCJsYWJlbFwiLFxuICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICBcInNob3cgbGFzdCB0cmlja1wiLFxuICAgICAgICAgICAgICBlKFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwic2hvdy1sYXN0LXRyaWNrXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHN0YXRlLnNob3dfbGFzdF90cmljayxcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGV2dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc3RhdGUuc2hvd19sYXN0X3RyaWNrID0gZXZ0LnRhcmdldC5jaGVja2VkO1xuICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLnNob3dfbGFzdF90cmljaykge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzaG93X2xhc3RfdHJpY2tcIiwgXCJvblwiKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInNob3dfbGFzdF90cmlja1wiLCBcIm9mZlwiKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJlbmRlclVJKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBlKFxuICAgICAgICAgICAgICBcImxhYmVsXCIsXG4gICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgIFwiYmVlcCBvbiB0dXJuXCIsXG4gICAgICAgICAgICAgIGUoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJzaG93LWxhc3QtdHJpY2tcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgICAgICAgICAgICAgY2hlY2tlZDogc3RhdGUuYmVlcF9vbl90dXJuLFxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAoZXZ0KSA9PiB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5iZWVwX29uX3R1cm4gPSBldnQudGFyZ2V0LmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuYmVlcF9vbl90dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImJlZXBfb25fdHVyblwiLCBcIm9uXCIpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYmVlcF9vbl90dXJuXCIsIFwib2ZmXCIpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmVuZGVyVUkoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKSxcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyb290XCIpXG4gICAgICApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBSZWFjdERPTS5yZW5kZXIoXG4gICAgICA8cD5kaXNjb25uZWN0ZWQgZnJvbSBzZXJ2ZXIsIHBsZWFzZSByZWZyZXNoPC9wPixcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicm9vdFwiKVxuICAgICk7XG4gIH1cbn1cblxud3Mub25vcGVuID0gKCkgPT4ge1xuICBzdGF0ZS5jb25uZWN0ZWQgPSB0cnVlO1xuICByZW5kZXJVSSgpO1xufTtcbndzLm9uY2xvc2UgPSAoZXZ0KSA9PiB7XG4gIHN0YXRlLmNvbm5lY3RlZCA9IGZhbHNlO1xuICByZW5kZXJVSSgpO1xufTtcbndzLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICBjb25zdCBtc2cgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICBpZiAobXNnLk1lc3NhZ2UpIHtcbiAgICBzdGF0ZS5tZXNzYWdlcy5wdXNoKG1zZy5NZXNzYWdlKTtcbiAgICBpZiAoc3RhdGUubWVzc2FnZXMubGVuZ3RoID49IDEwMCkge1xuICAgICAgc3RhdGUubWVzc2FnZXMuc2hpZnQoKTtcbiAgICB9XG4gIH1cbiAgaWYgKG1zZy5Ccm9hZGNhc3QpIHtcbiAgICBzdGF0ZS5tZXNzYWdlcy5wdXNoKHtcbiAgICAgIGZyb206IFwiR0FNRVwiLFxuICAgICAgbWVzc2FnZTogbXNnLkJyb2FkY2FzdCxcbiAgICAgIGZyb21fZ2FtZTogdHJ1ZSxcbiAgICB9KTtcbiAgICBpZiAoc3RhdGUubWVzc2FnZXMubGVuZ3RoID49IDEwMCkge1xuICAgICAgc3RhdGUubWVzc2FnZXMuc2hpZnQoKTtcbiAgICB9XG4gIH1cblxuICBpZiAobXNnLkVycm9yKSB7XG4gICAgc3RhdGUuZXJyb3JzLnB1c2gobXNnLkVycm9yKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHN0YXRlLmVycm9ycyA9IHN0YXRlLmVycm9ycy5maWx0ZXIoKHYpID0+IHYgIT0gbXNnLkVycm9yKTtcbiAgICAgIHJlbmRlclVJKCk7XG4gICAgfSwgNTAwMCk7XG4gIH1cblxuICBpZiAobXNnLlN0YXRlKSB7XG4gICAgc3RhdGUuZ2FtZV9zdGF0ZSA9IG1zZy5TdGF0ZS5zdGF0ZTtcbiAgICBzdGF0ZS5jYXJkcyA9IG1zZy5TdGF0ZS5jYXJkcztcbiAgfVxuXG4gIGlmIChtc2cgPT0gXCJLaWNrZWRcIikge1xuICAgIHdzLmNsb3NlKCk7XG4gIH1cblxuICByZW5kZXJVSSgpO1xufTtcblxuY29uc3QgYmVlcENvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7XG5cbmZ1bmN0aW9uIGJlZXAodm9sOiBudW1iZXIsIGZyZXE6IG51bWJlciwgZHVyYXRpb246IG51bWJlcikge1xuICBjb25zdCB2ID0gYmVlcENvbnRleHQuY3JlYXRlT3NjaWxsYXRvcigpO1xuICBjb25zdCB1ID0gYmVlcENvbnRleHQuY3JlYXRlR2FpbigpO1xuICB2LmNvbm5lY3QodSk7XG4gIHYuZnJlcXVlbmN5LnZhbHVlID0gZnJlcTtcbiAgdi50eXBlID0gXCJzcXVhcmVcIjtcbiAgdS5jb25uZWN0KGJlZXBDb250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgdS5nYWluLnZhbHVlID0gdm9sICogMC4wMTtcbiAgdi5zdGFydChiZWVwQ29udGV4dC5jdXJyZW50VGltZSk7XG4gIHYuc3RvcChiZWVwQ29udGV4dC5jdXJyZW50VGltZSArIGR1cmF0aW9uICogMC4wMDEpO1xufVxuXG5kZWNsYXJlIHZhciBDQVJEUzogSUNhcmRJbmZvW107XG5cbmludGVyZmFjZSBJQ2FyZEluZm8ge1xuICB2YWx1ZTogc3RyaW5nO1xuICBkaXNwbGF5X3ZhbHVlOiBzdHJpbmc7XG4gIHR5cDogc3RyaW5nO1xuICBudW1iZXI6IHN0cmluZyB8IG51bGw7XG4gIHBvaW50czogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgSVBsYXllciB7XG4gIGlkOiBudW1iZXI7XG4gIG5hbWU6IHN0cmluZztcbiAgbGV2ZWw6IHN0cmluZztcbn1cblxudHlwZSBJR2FtZU1vZGUgPSBcIlRyYWN0b3JcIiB8IHsgRmluZGluZ0ZyaWVuZHM6IElGaW5kaW5nRnJpZW5kcyB9O1xuaW50ZXJmYWNlIElGaW5kaW5nRnJpZW5kcyB7XG4gIG51bV9mcmllbmRzOiBudW1iZXI7XG4gIGZyaWVuZHM6IFtJRnJpZW5kXTtcbn1cblxuaW50ZXJmYWNlIElGcmllbmQge1xuICBjYXJkOiBzdHJpbmc7XG4gIHNraXA6IG51bWJlcjtcbiAgcGxheWVyX2lkOiBudW1iZXIgfCBudWxsO1xufVxuXG5pbnRlcmZhY2UgSUdhbWVTdGF0ZSB7XG4gIEluaXRpYWxpemU6IElJbml0aWFsaXplUGhhc2UgfCBudWxsO1xuICBEcmF3OiBJRHJhd1BoYXNlIHwgbnVsbDtcbiAgRXhjaGFuZ2U6IElFeGNoYW5nZVBoYXNlIHwgbnVsbDtcbiAgUGxheTogSVBsYXlQaGFzZSB8IG51bGw7XG4gIERvbmU6IHN0cmluZyB8IG51bGw7XG59XG5cbmludGVyZmFjZSBJSW5pdGlhbGl6ZVBoYXNlIHtcbiAgbWF4X3BsYXllcl9pZDogbnVtYmVyO1xuICBwbGF5ZXJzOiBJUGxheWVyW107XG4gIG51bV9kZWNrczogbnVtYmVyIHwgbnVsbDtcbiAga2l0dHlfc2l6ZTogbnVtYmVyIHwgbnVsbDtcbiAgZ2FtZV9tb2RlOiBJR2FtZU1vZGU7XG4gIGxhbmRsb3JkOiBudW1iZXIgfCBudWxsO1xufVxuXG5pbnRlcmZhY2UgSUJpZCB7XG4gIGlkOiBudW1iZXI7XG4gIGNhcmQ6IHN0cmluZztcbiAgY291bnQ6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIElEcmF3UGhhc2Uge1xuICBtYXhfcGxheWVyX2lkOiBudW1iZXI7XG4gIG51bV9kZWNrczogbnVtYmVyO1xuICBnYW1lX21vZGU6IElHYW1lTW9kZTtcbiAgZGVjazogc3RyaW5nW107XG4gIHBsYXllcnM6IElQbGF5ZXJbXTtcbiAgb2JzZXJ2ZXJzOiBJUGxheWVyW107XG4gIGhhbmRzOiBJSGFuZHM7XG4gIGJpZHM6IElCaWRbXTtcbiAgcG9zaXRpb246IG51bWJlcjtcbiAgbGFuZGxvcmQ6IG51bWJlciB8IG51bGw7XG4gIGtpdHR5OiBzdHJpbmdbXTtcbiAgbGV2ZWw6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIElFeGNoYW5nZVBoYXNlIHtcbiAgbWF4X3BsYXllcl9pZDogbnVtYmVyO1xuICBudW1fZGVja3M6IG51bWJlcjtcbiAgZ2FtZV9tb2RlOiBJR2FtZU1vZGU7XG4gIGhhbmRzOiBJSGFuZHM7XG4gIGtpdHR5OiBzdHJpbmdbXTtcbiAga2l0dHlfc2l6ZTogbnVtYmVyO1xuICBsYW5kbG9yZDogbnVtYmVyO1xuICBwbGF5ZXJzOiBJUGxheWVyW107XG4gIG9ic2VydmVyczogSVBsYXllcltdO1xuICB0cnVtcDogSVRydW1wO1xufVxuXG5pbnRlcmZhY2UgSVBsYXlQaGFzZSB7XG4gIG1heF9wbGF5ZXJfaWQ6IG51bWJlcjtcbiAgbnVtX2RlY2tzOiBudW1iZXI7XG4gIGdhbWVfbW9kZTogSUdhbWVNb2RlO1xuICBoYW5kczogSUhhbmRzO1xuICBwb2ludHM6IHsgW2lkOiBudW1iZXJdOiBzdHJpbmdbXSB9O1xuICBraXR0eTogc3RyaW5nW107XG4gIGxhbmRsb3JkOiBudW1iZXI7XG4gIGxhbmRsb3Jkc190ZWFtOiBudW1iZXJbXTtcbiAgcGxheWVyczogSVBsYXllcltdO1xuICBvYnNlcnZlcnM6IElQbGF5ZXJbXTtcbiAgdHJ1bXA6IElUcnVtcDtcbiAgdHJpY2s6IElUcmljaztcbiAgbGFzdF90cmljazogSVRyaWNrIHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIElUcmlja1VuaXQge1xuICBUcmFjdG9yOiB7IGNvdW50OiBudW1iZXI7IG1lbWJlcnM6IHN0cmluZ1tdIH0gfCBudWxsO1xuICBSZXBlYXRlZDogeyBjb3VudDogbnVtYmVyOyBjYXJkOiBzdHJpbmcgfSB8IG51bGw7XG59XG5cbmludGVyZmFjZSBJVHJpY2tGb3JtYXQge1xuICBzdWl0OiBzdHJpbmc7XG4gIHRydW1wOiBJVHJ1bXA7XG4gIHVuaXRzOiBbSVRyaWNrVW5pdF07XG59XG5cbmludGVyZmFjZSBJVHJpY2sge1xuICBwbGF5ZXJfcXVldWU6IG51bWJlcltdO1xuICBwbGF5ZWRfY2FyZHM6IHsgaWQ6IG51bWJlcjsgY2FyZHM6IHN0cmluZ1tdIH1bXTtcbiAgY3VycmVudF93aW5uZXI6IG51bWJlciB8IG51bGw7XG4gIHRyaWNrX2Zvcm1hdDogSVRyaWNrRm9ybWF0IHwgbnVsbDtcbiAgdHJ1bXA6IElUcnVtcDtcbn1cblxuaW50ZXJmYWNlIElIYW5kcyB7XG4gIGhhbmRzOiB7IFtwbGF5ZXJfaWQ6IG51bWJlcl06IHsgW2NhcmQ6IHN0cmluZ106IG51bWJlciB9IH07XG4gIGxldmVsOiBudW1iZXI7XG4gIHRydW1wOiBJVHJ1bXAgfCBudWxsO1xufVxuXG5pbnRlcmZhY2UgSVRydW1wIHtcbiAgU3RhbmRhcmQ6IHsgc3VpdDogc3RyaW5nOyBudW1iZXI6IHN0cmluZyB9IHwgbnVsbDtcbiAgTm9UcnVtcDogeyBudW1iZXI6IHN0cmluZyB9IHwgbnVsbDtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=